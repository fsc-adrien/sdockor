{"version":3,"sources":["webpack://turbo/./source/scripts/sections.js"],"names":["window","logoList","init","$","flickity","cellAlign","pageDots","prevNextButtons","contain","groupCells","initialIndex","unload","target","hasClass","featuredCollection","each","index","value","productsPerSlide","data","productsLimit","productsAvailable","draggable","prevNext","wrapAround","Shopify","loadFeatures","name","version","productMedia","setupMedia","PXUTheme","media_queries","medium","matches","parents","removeClass","lazyLoad","imagesLoaded","usePageDots","freeScroll","arrowShape","arrowSize","addClass","$target","$slider","find","featuredPromotions","hover","this","slideDown","slideUp","$promos","animationStyle","waypoint","element","offset","slideshow","$homepageSlider","settings","slideshowSpeed","slideshowTextAnimation","adaptiveHeight","arrowShow","length","autoPlay","flkty","setTimeout","on","is","currentSlide","selectedIndex","testimonials","$testimonialSlider","theBlock","closest","gallery","wrapper","images","imgWidth","imgHeight","attr","width","height","css","fancybox","baseClass","clickContent","afterShow","fancyImages","image","alt","eq","video","featuredVideos","get","featuredVideoPlayers","Plyr","setup","controls","videoControls","fullscreen","enabled","fallback","iosNative","storage","player","id","isHTML5","elements","event","instance","detail","plyr","pause","globalVideoPlayers","push","$video","$section","$videoElement","$videoWrapper","$playButton","$secondaryButton","$videoText","$videoTextContainer","$image","$posterImage","aspectRatio","isAutoplay","isLoopingEnabled","isMuted","isYouTube","isVimeo","videoID","playerID","original","large","autoplay","hide","show","play","muted","ratio","loop","code","playing","cart","document","querySelector","handleTos","cartNoteEl","handleNotes","warning","translation","agree_to_terms_warning","before","submit","el","addEventListener","body","JSON","stringify","note","fetch","routes","cart_update_url","method","headers","Accept","selectCallback","variant","selector","$element","evt","createEvent","$product","product","$productForm","variantInventory","initEvent","variantIdField","dispatchEvent","$notifyForm","productTitle","$notifyFormInputs","notifySend","notify_email_send","notifyUrl","notifyFormEmail","notifyFormPlaceholder","title","variantTitle","replace","notifyMessage","notify_message_first","notify_message_last","notify_email","notifyFormHTML","_","slider","$sliderInstance","Flickity","undefined","featured_image","featured_media","select","showOnlySelectedVariantImage","$productGallery","$thumbnailProductGallery","updateGallery","$gallery","mediaArray","flickityInstance","selectedVariantMediaId","String","firstMediaItem","forEach","mediaItem","$mediaItem","mediaId","isVariantSpecificImage","off","remove","indexOf","prepend","resize","cells","productGalleryMedia","thumbnailGalleryMedia","theme_settings","product_form_style","quick_shop_style","filter","swatchImage","$quickShopElement","v","currentVariant","inventory_quantity","inventory_management","inventory_policy","text","sku","options","i","radioButton","escape","checked","available","display_inventory_left","itemsLeftText","one_item_left","items_left_text","inventoryThreshold","parseInt","inventory_threshold","html","limit_quantity","removeAttr","empty","message","sold_out_text","unavailable_text","fadeIn","append","currency","show_multiple_currencies","currencyConverter","convertCurrencies","productPage","loadQuickshop","url","shopifyAsyncview","load","view","enableGallery","location","search","prev","notify_success_text","optionIndex","optionValue","val","parentForm","siblings","notifyForm","option1","option2","option3","trigger","$trigger","first","last","wrap","parent","zoom","touch","magnify","afterClose","$instanceGallery","focus","recipientFormEl","sectionEl","recipientForm","RecipientForm","complementaryProductsEl","sectionId","productId","productRecommendationLimit","parse","textContent","complementaryProductRecommendations","ComplementaryProducts","productRecommendationsRoute","product_recommendations_url","includeIndicatorDots","limit","loadProductRecommendations","runOptionSelector","$defaultSelector","$options","$productDetails","priceUIEl","paymentTerms","PaymentTerms","hover_enabled","quick_shop_enabled","priceUIBadgeEl","surfacePickUpEl","JSONData","isPriceSavingsEnabled","isPercentEnabled","priceUI","priceUIBadge","surfacePickUp","ShopifyPriceUI","PriceUI","PriceUIBadge","ShopifySurfacePickUp","onModalRequest","contents","surfacePickUpModal","fragment","createDocumentFragment","header","createElement","classList","add","innerHTML","appendChild","subtitle","insertBefore","firstChild","open","hash","infobar","toolbar","smallBtn","autoStart","mobile","preventCaptionOverlap","OptionSelectors","onVariantSelected","update","formatter","price","formatMoney","handler","priceUIFragment","_product","compare_at_price","span","savings","percentage","Math","round","savings_text","free_text","display_sold_out_price","soldOutText","priceElement","style","sticker","stickerText","setAttribute","percent_off_text","sale_text","enableHistoryState","$slides","$thumbnails","productLightbox","thumbnailsEnabled","thumbnailsSliderEnabled","thumbnailsPosition","thumbnailsArrows","checkForVideos","slide","$slide","mediaType","iframeID","videoPlayers","media","dataset","plyrVideoId","autoplayVideo","autoplayYoutubeVideo","is_touch_device","imageFunctions","currentPlayer","keyboard","focused","global","isScreenSizeLarge","loopingEnabled","_index","showModelIcon","dragThreshold","watchCSS","$sliderArrows","pId","$selectedSlide","sortedModels","models","model","container","currentTarget","keypress","which","removeVariantImages","$elements","mediaVariantImage","outerHeight","navCellHeight","navHeight","scrollY","position","top","scrollTop","animate","asNavFor","thumbnail","$thumbnail","$productRecommendations","$productRecommendationsSection","sectionID","productID","recommendationsURL","sectionEnabled","$recommendedProductSlider","recommendedProductsSlider","requestUrl","ajax","type","success","$recommendedProductsElement","PaymentButton","hideNoScript","videoFeature","setupRecommendedVideoPlayer","quickShop","toggleSwatchImages","collection_secondary_image","showSecondaryImage","loadDynamicProducts","productSwatches","$productForms","productForm","productSection","linkOptionSelectors","swatchElement","$swatchElement","swatchValue","toString","prop","productSlider","$productSlider","lessSlidesThanProducts","limitGreaterThanSlide","evenSlide","initializeQuantityBox","e","$this","$input","valMax","valMin","isNaN","HeaderFader","constructor","openers","Set","fadeClass","contains","shouldFade","updateShouldFade","size","_fade","clear","_clear","fade","requestor","has","delete","NavigationDesktopParent","menuItem","detailsItem","parentMenu","_locked","locked","menuLink","submenuEl","isWideNav","openOnClick","_isOpen","submenu","events","EventHandler","_open","bind","_close","close","closeEsc","key","closeTimer","mouseover","clearTimeout","mouseout","click","stopPropagation","clickedParent","preventDefault","href","focusin","closeSiblings","animation","animations","transition","state","register","forceClose","forceOpen","_setAlternateDrop","menuBounds","getBoundingClientRect","right","documentElement","clientWidth","left","_removeAlternateDrop","force","closeEscEvent","NavigationDesktopMenu","navList","headerFader","animateTo","onStart","then","unregister","removeAttribute","unregisterAll","menuItems","children","_selectedBlock","closeAllMenus","onMeganavSelect","block","meganavParent","onMeganavDeselect","current","NavigationDesktop","navTier1","headerNavMenu","navigationDesktopManager","desktopNavs","nav","initAll","Array","prototype","map","call","querySelectorAll","navEl","MobileMenuDrawer","icon","_toggle","headerSearch","mobileMenuDrawer","mobileSearch","closeMiniCart","toggleClass","openMiniCart","$cart_container","Cookies","set","expires","path","domain","sameSite","secure","MobileStickyHeader","headerHeight","triggerY","observer","scrollTimeout","$headerGroup","$mainHeader","$observerTargets","$header","$promoBanner","$topBar","$sectionWrapper","promoBannerHeightCache","updateHeaderHeight","updateTriggerY","toggleSticky","initResizeObserver","ResizeObserver","entries","some","entry","promoChange","max","removeEventListener","observe","error","console","fn","delay","lastTime","now","Date","args","apply","throttle","toggle","getComputedStyle","getPropertyValue","setProperty","removeProperty","anchorLink","stickyNavAnimation","sticky_nav","Headhesive","classes","clone","stick","unstick","onInit","onStick","maxHeight","onUnstick","onDestroy","cart_action","$cartContainer","destroy","Meganav","getTargets","afterChange","content","targetHandle","meganavHandle","targets","handle","newMenuItems","refTarget","_getUrl","menuItemTemplate","inject","_removeInjectedContent","newMenuItem","firstElementChild","cloneNode","_updateHref","newItem","replaceWith","dataHrefEl","a","getAttribute","meganavManager","meganavs","Map","desktop","deselect","meganav","injectAll","_addAll","meganavEl","lazyframe","mapsToLoad","sectionid","address","directions","mapstyle","showpin","apikey","ajaxSetup","cache","getScript","findLocation","mapArray","geoLat","geoLng","google","maps","Geocoder","geocode","results","status","GeocoderStatus","OK","geometry","lat","lng","initMap","log","styleJson","elementType","stylers","color","featureType","visibility","mapOptions","center","styles","disableDefaultUI","getElementById","Marker","shoppableImage","blocks","currentImage","$wrapper","slideshowTransition","prevNextBtns","currentShoppableImage","selectedElement","btn","appendTo","hotspot","repositionHotspotContent","repositionHotspotContentEls","interactiveEls","clickedInteractiveEl","hotspotId","debounce","contentWrapperEl","contentEl","transform","bottom","contentBounds","shoppableImageBounds","cssTop","mobile_and_tablet","callback","timeout","timeoutId","accordion","flg","$vanillaAccordion","$faqHeading","next","slideToggle","keyCode","$accordion","ProductCTA","HTMLElement","shortcode","super","attachShadow","mode","forAttr","variants","variantId","appendto","_registerEvent","listener","_onVariantChange","_setVisible","connectedCallback","slot","shadowRoot","disconnectedCallback","visible","toggleAttribute","customElements","define"],"mappings":"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","file":"sections.min.js","sourcesContent":["/* eslint-disable */\n/* ==================================================\n#Logo list\n#Featured collection\n#Featured promotions\n#Slideshow\n#Testimonials\n#Gallery\n#Video\n#Cart\n#Product\n#Header\n#Map\n#Shoppable Image\n#Global accordions\n#Global shortcodes\n\n/*============================================================================\n  Logo list\n==============================================================================*/\n\nwindow.logoList = {\n  init() {\n    $('[data-logo-slider]').flickity({\n      cellAlign: 'center',\n      pageDots: false,\n      prevNextButtons: true,\n      contain: true,\n      groupCells: true,\n      initialIndex: 0\n    });\n  },\n  unload(target) {\n    if ($(target).hasClass('flickity-enabled')) {\n      $(target).flickity('destroy');\n    }\n  }\n}\n\n/*============================================================================\n  Featured collection\n==============================================================================*/\n\nwindow.featuredCollection = {\n  init() {\n    $('.js-product-slider .products-slider').each((index, value) => {\n      const productsPerSlide = $(value).data('products-per-slide');\n      const productsLimit = $(value).data('products-limit');\n      const productsAvailable = $(value).data('products-available');\n      let cellAlign = '';\n      let draggable = false;\n      let prevNext = false;\n      let wrapAround = false;\n      let initialIndex = 0;\n\n      // Ensure product media libraries are present\n      window.Shopify.loadFeatures([\n        {\n          name: 'shopify-xr',\n          version: '1.0',\n        },\n        {\n          name: 'model-viewer-ui',\n          version: '1.0',\n        },\n      ], window.productMedia.setupMedia);\n\n      if (\n        (\n          productsPerSlide === '2'\n          && productsAvailable > productsPerSlide\n          && productsLimit > productsPerSlide\n        )\n        || (\n          productsPerSlide === '4'\n          && productsAvailable > productsPerSlide\n          && productsLimit > productsPerSlide\n        )\n        || (\n          productsPerSlide === '6'\n          && productsAvailable > productsPerSlide\n          && productsLimit > productsPerSlide\n        )\n      ) {\n        cellAlign = 'left';\n      } else {\n        cellAlign = 'center';\n      }\n\n      if (productsAvailable > productsPerSlide && productsLimit > productsPerSlide) {\n        draggable = true;\n        prevNext = true;\n        wrapAround = true;\n      } else {\n        draggable = false;\n        prevNext = false;\n        wrapAround = false;\n      }\n\n      if (\n        (\n          productsPerSlide === '2'\n          && productsAvailable > productsPerSlide\n        )\n        || (\n          productsPerSlide === '4'\n          && productsAvailable > productsPerSlide\n        )\n        || (\n          productsPerSlide === '6'\n          && productsAvailable > productsPerSlide\n        )\n      ) {\n        initialIndex = 0;\n      } else if (productsPerSlide === '3' && productsAvailable) {\n        initialIndex = 1;\n      } else if (productsPerSlide === '5' && productsAvailable) {\n        initialIndex = 2;\n      } else if (productsPerSlide === '7' && productsAvailable) {\n        initialIndex = 3;\n      }\n\n      if (window.PXUTheme.media_queries.medium.matches) {\n        cellAlign = 'center';\n        draggable = true;\n        prevNext = true;\n        wrapAround = true;\n        initialIndex = 1;\n\n        $(value).parents('.even-num-slides').removeClass('even-num-slides');\n      }\n\n      $(value).flickity({\n        lazyLoad: 2,\n        imagesLoaded: true,\n        draggable,\n        prevNextButtons: prevNext,\n        wrapAround,\n        cellAlign,\n        pageDots: window.usePageDots,\n        contain: true,\n        freeScroll: true,\n        arrowShape: window.arrowSize,\n        initialIndex,\n      });\n\n      $(value).addClass('slider-initialized');\n    });\n  },\n  unload($target) {\n    const $slider = $target.find('.js-product-slider');\n\n    if ($slider.hasClass('flickity-enabled')) {\n      $slider.flickity('destroy');\n    }\n  },\n};\n\n/*============================================================================\n  Featured promotions\n==============================================================================*/\nwindow.featuredPromotions = {\n  init() {\n    $('.feature-overlay').hover(function () {\n      $(this).find('.feature-details').slideDown('100', function () {\n        $(this).addClass('reveal-details');\n      });\n    }, function () {\n      $(this).find('.feature-details').removeClass('reveal-details');\n      $(this).find('.feature-details').slideUp('100');\n    });\n\n    $('.js-featured-promotions').each(function () {\n      const $promos = $(this);\n      const animationStyle = $(this).data('promo-animation');\n\n      $promos.waypoint(function () {\n        $(this.element).find('.feature-section').addClass(`animated ${animationStyle}`);\n      }, { offset: '80%' });\n    });\n  },\n};\n\n/*============================================================================\n  Slideshow\n==============================================================================*/\n\nwindow.slideshow = {\n  init() {\n    $('.js-homepage-slideshow').each(function () {\n      const $homepageSlider = $(this);\n      const settings = {\n        slideshowSpeed: $homepageSlider.data('slideshow-speed') * 1000,\n        slideshowTextAnimation: $homepageSlider.data('slideshow-text-animation'),\n        adaptiveHeight: $homepageSlider.data('adaptive-height'),\n      };\n\n      // Initiate the slideshow\n      if (!$homepageSlider.hasClass('flickity-enabled')) {\n        const arrowShow = $homepageSlider.find('.gallery-cell').length === 1 ? false : true;\n        $homepageSlider.flickity({\n          adaptiveHeight: settings.adaptiveHeight,\n          wrapAround: true,\n          cellAlign: 'left',\n          imagesLoaded: true,\n          prevNextButtons: arrowShow,\n          draggable: arrowShow,\n          autoPlay: settings.slideshowSpeed,\n        });\n\n        if (settings.slideshowTextAnimation !== '') {\n          const flkty = $homepageSlider.data('flickity');\n          setTimeout(() => {\n            $homepageSlider.find('.gallery-cell:nth-child(1) .caption-content').addClass(`animated ${settings.slideshowTextAnimation}`);\n          }, 400);\n\n          $homepageSlider.on('select.flickity', () => {\n            if ($homepageSlider.is(':visible')) {\n              const currentSlide = flkty.selectedIndex + 1;\n              setTimeout(() => {\n                $homepageSlider.find('.caption-content').removeClass(`animated ${settings.slideshowTextAnimation}`);\n                $homepageSlider.find(`.gallery-cell:nth-child(${currentSlide}) .caption-content`).addClass(`animated ${settings.slideshowTextAnimation}`);\n              }, 400);\n            }\n          });\n        }\n      }\n\n      if ($homepageSlider.find('.gallery-cell').length > 1) {\n        $homepageSlider.addClass('multi-image');\n      } else {\n        $homepageSlider.addClass('single-image');\n      }\n    });\n  },\n  unload($target) {\n    const $slider = $target.find('.js-homepage-slideshow');\n    $slider.flickity('destroy');\n  },\n};\n\n/*============================================================================\n  Testimonials\n==============================================================================*/\n\nwindow.testimonials = {\n  init() {\n    $('.js-testimonial').each(function () {\n      const $testimonialSlider = $(this);\n      const settings = {\n        slideshowSpeed: $testimonialSlider.data('slideshow-speed') * 1000,\n        slideshowTextAnimation: $testimonialSlider.data('slideshow-text-animation'),\n        adaptiveHeight: $testimonialSlider.data('adaptive-height'),\n      };\n\n      if ($('.testimonial-image').length > 0) {\n        $('.testimonial-block').each(function () {\n          if ($(this).find('.testimonial-image').length === 0) {\n            const theBlock = $(this).closest('.testimonial-block');\n            $(theBlock).addClass('set-testimonial-height');\n          }\n        });\n      }\n\n      // Initiate the slideshow\n      if (!$testimonialSlider.hasClass('flickity-enabled')) {\n        const arrowShow = $testimonialSlider.find('.gallery-cell').length === 1 ? false : true;\n        $testimonialSlider.flickity({\n          adaptiveHeight: settings.adaptiveHeight,\n          wrapAround: true,\n          cellAlign: 'left',\n          imagesLoaded: true,\n          prevNextButtons: arrowShow,\n          draggable: arrowShow,\n          autoPlay: settings.slideshowSpeed,\n        });\n\n        if (settings.slideshowTextAnimation !== '') {\n          const flkty = $testimonialSlider.data('flickity');\n          setTimeout(() => {\n            $testimonialSlider.find('.gallery-cell:nth-child(1) .caption-content').addClass(`animated ${settings.slideshowTextAnimation}`);\n          }, 400);\n\n          $testimonialSlider.on('select.flickity', () => {\n            if ($testimonialSlider.is(':visible')) {\n              const currentSlide = flkty.selectedIndex + 1;\n              setTimeout(() => {\n                $testimonialSlider.find('.caption-content').removeClass(`animated ${settings.slideshowTextAnimation}`);\n                $testimonialSlider.find(`.gallery-cell:nth-child(${currentSlide}) .caption-content`).addClass(`animated ${settings.slideshowTextAnimation}`);\n              }, 400);\n            }\n          });\n        }\n      }\n\n      if ($testimonialSlider.find('.gallery-cell').length > 1) {\n        $testimonialSlider.addClass('multi-image');\n      } else {\n        $testimonialSlider.addClass('single-image');\n      }\n    });\n  },\n  unload($target) {\n    const $slider = $target.find('.js-testimonial');\n    $slider.flickity('destroy');\n  },\n};\n\n/*============================================================================\n  Gallery\n==============================================================================*/\n\nwindow.gallery = {\n  init() {\n    $('.gallery-horizontal').find('.gallery-image-wrapper').each(function () {\n      const wrapper = $(this);\n      const images = $(this).find('img');\n      let imgWidth;\n      let imgHeight;\n\n      $('<img />').attr('src', $(images).attr('src')).on('load', function () {\n        imgWidth = this.width;\n        imgHeight = this.height;\n\n        $(wrapper).css('flex-basis', imgWidth * 200 / imgHeight);\n        $(wrapper).css('flex-grow', imgWidth * 200 / imgHeight);\n        $(wrapper).find('i').css('padding-bottom', `${imgHeight / imgWidth * 100}%`);\n      });\n    });\n\n    if ($('[rel=gallery]').length) {\n      $('[rel=gallery]').fancybox({\n        baseClass: 'gallery-section__lightbox',\n        clickContent: 'nextOrClose',\n        afterShow() {\n          // Loop through fancybox images, add alt attributes\n          const fancyImages = $('.fancybox-image');\n          $('.gallery__image').each((index, image) => {\n            const $image = $(image);\n            const alt = $image.attr('alt');\n            fancyImages.eq(index).attr('alt', alt);\n          });\n        },\n      });\n    }\n  },\n};\n\n/*============================================================================\n  Video\n==============================================================================*/\nwindow.video = {\n  init() {\n\n    // Set up plyr for newly embedded video\n    var featuredVideos = $('[data-video-element]').get();\n\n    var featuredVideoPlayers = Plyr.setup(featuredVideos, {\n      controls: window.videoControls,\n      fullscreen: {\n        enabled: true,\n        fallback: true,\n        iosNative: true\n      },\n      storage: {\n        enabled: false\n      }\n    });\n\n    // Adds plyr video id to video wrapper\n    $.each(featuredVideoPlayers, function(index, player) {\n      var id = player.id;\n      var $video;\n\n      if (player.isHTML5) {\n        $video = $(player.elements.wrapper).find('video');\n        $video.attr('data-plyr-video-id', id);\n      }\n\n      // When a video is playing, pause any other instances\n      player.on('play', function(event) {\n        var instance = event.detail.plyr;\n        $.each(featuredVideoPlayers, function(index, player) {\n          if (instance.id != player.id) {\n            player.pause();\n          }\n        })\n      })\n\n      // Moves players from video section into global array\n      if (window.globalVideoPlayers) {\n        window.globalVideoPlayers.push(player);\n      }\n    })\n\n    $('[data-video-element]').each(function(index, video) {\n\n      // Variables\n      var $video = $(video);\n      var $section = $video.parents('.shopify-section').attr('id', id);\n      var $videoElement = $section.find($video);\n      var $videoWrapper = $videoElement.parents('.video-wrapper');\n      var $playButton = $videoWrapper.find('[data-play-button]');\n      var $secondaryButton = $videoWrapper.find('[data-secondary-button]');\n      var $videoText = $videoWrapper.find('[data-video-text]');\n      var $videoTextContainer = $videoWrapper.find('[data-video-text-container]');\n      var $image = $videoWrapper.find('.video-wrapper__image');\n      var $posterImage = $videoWrapper.data('poster-image-uploaded');\n      var aspectRatio = $videoWrapper.data('aspect-ratio');\n      var id = $videoWrapper.data('video-src');\n      var isAutoplay = $videoWrapper.data('autoplay');\n      var isLoopingEnabled = $videoWrapper.data('autoloop');\n      var isMuted = $videoWrapper.data('mute-video');\n\n      $.each(featuredVideoPlayers, function(index, player) {\n        var videoID;\n        var playerID;\n\n        if (player.isYouTube || player.isVimeo) {\n          var videoID = $videoWrapper.attr('id');\n          var playerID = $(player.elements.original).attr('id');\n        } else if (player.isHTML5) {\n          var videoID = $videoWrapper.find('[data-plyr-video-id]').data('plyr-video-id');\n          var playerID = player.id;\n          $videoElement = $section.find('.plyr--video');\n        }\n\n        if (playerID == videoID) {\n\n          // Reset play button icon\n          $videoWrapper.removeClass('play-button-icon--visible');\n\n          // Autoplay\n          if (isAutoplay) {\n            // If on desktop or player is YouTube/Vimeo\n            if (window.PXUTheme.media_queries.large.matches || player.isYouTube || player.isVimeo) {\n\n              player.autoplay = true;\n\n              // Hide image\n              $image.hide();\n\n              // Show video\n              $videoElement.show();\n\n              if (\n                $videoTextContainer.hasClass('display-text-over-video--false') &&\n                $videoWrapper.hasClass('caption--below-false') &&\n                !window.PXUTheme.media_queries.large.matches\n              ) {\n                $videoText.hide();\n              } else {\n                $videoText.show();\n              }\n\n              // Keep play button hidden\n              $playButton.hide();\n\n              // HTML5 Mobile Video\n            } else if (window.PXUTheme.media_queries.medium.matches && player.isHTML5) {\n\n              // Hide image\n              $image.hide();\n\n              // Show video\n              $videoElement.show();\n\n              // Display button so that video can be played\n              $playButton.show();\n\n              player.on('play', function() {\n                // Show video\n                $videoElement.show();\n\n                // Hide play button\n                $playButton.hide();\n              })\n            }\n          } else { // If Autoplay disabled\n            // If poster image, show image wrapper otherwise hide it\n            if ($posterImage) {\n              $image.show();\n              $videoElement.hide();\n            } else {\n              $videoElement.show();\n            }\n          }\n\n          // Clicking image will play video\n          $image.on('click', function() {\n            // Hide image\n            $(this).hide();\n\n            // Show video\n            $videoElement.show();\n\n            player.play();\n          })\n\n          // Muted\n          if (isMuted) {\n            player.muted = true;\n          }\n\n          // Aspect Ratio\n          if (aspectRatio) {\n            player.ratio = aspectRatio;\n          }\n\n          // Looping\n          if (isLoopingEnabled) {\n            player.loop = true;\n          }\n\n          // Show Video Controls\n          // - video controls get hidden using a css class: '.video-controls-enabled--false'\n\n          // If button exists, hide text and poster\n          if ($playButton) {\n            $playButton.on('click', function() {\n\n              // Play video\n              player.play();\n            })\n          }\n\n          player.on('statechange', event => {\n            //Check if unstarted when state changed and play if so\n            if(event.detail.code == '-1') {\n              player.play();\n            }\n          });\n\n          player.on('play', function() {\n\n            // Hide image\n            $image.hide();\n\n            // Reset play button icon\n            $videoWrapper.removeClass('play-button-icon--visible');\n\n            // Show video\n            $videoElement.show();\n\n            if (\n              $videoTextContainer.hasClass('display-text-over-video--false') &&\n              $videoWrapper.hasClass('caption--below-false') &&\n              !window.PXUTheme.media_queries.large.matches\n            ) {\n              $videoTextContainer.hide();\n            } else {\n              $videoTextContainer.show();\n            }\n\n            // Hide play button\n            if ($playButton) {\n              $playButton.hide();\n            }\n\n            // Hide secondary button\n            if ($secondaryButton) {\n              $secondaryButton.hide();\n            }\n          })\n\n          // If video is paused, show play button icon\n          player.on('pause', function() {\n            if ($playButton.is(':hidden') || $playButton.length == 0) {\n              $videoWrapper.addClass('play-button-icon--visible');\n            }\n\n            $videoTextContainer.show();\n          })\n\n          // If page loads with video paused and no button showing, show icon\n          if (!player.playing && $playButton.is(':hidden') || $playButton.length == 0) {\n            $videoWrapper.addClass('play-button-icon--visible');\n          }\n\n          return false;\n        }\n      })\n    })\n  },\n};\n\n/*============================================================================\n  Cart\n==============================================================================*/\nwindow.cart = {\n  init() {\n    if (document.querySelector('#cart_form .tos_agree')) {\n      this.handleTos();\n    }\n\n    const cartNoteEl = document.querySelector('#cart_form [data-cart-note]');\n    if (cartNoteEl) this.handleNotes(cartNoteEl);\n  },\n  handleTos() {\n    // Terms of service on cart page\n    $('body').on('click', \"#cart_form input[type='submit']\", function () {\n      if ($(this).parents('form').find('.tos_agree').is(':checked')) {\n        $(this).submit();\n      } else {\n        const warning = `<p class=\"warning animated bounceIn\">${window.PXUTheme.translation.agree_to_terms_warning}</p>`;\n        if ($('p.warning').length === 0) {\n          $(this).before(warning);\n        }\n        return false;\n      }\n    });\n  },\n  handleNotes(el) {\n    el.addEventListener('change', event => {\n      const body = JSON.stringify({ note: event.target.value });\n      const options = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Accept: 'application/json' },\n      };\n      fetch(`${window.PXUTheme.routes.cart_update_url}`, { ...options, ...{ body } });\n    });\n  }\n};\n\n/*============================================================================\n  Product\n==============================================================================*/\nwindow.selectCallback = function (variant, selector, $element) {\n  const evt = document.createEvent('HTMLEvents');\n\n  let $product;\n\n  if ($element) {\n    $product = $element.find(`.product-${selector.product.id}`);\n  } else {\n    $product = $(`.product-${selector.product.id}`);\n  }\n\n  const $productForm = $('.product_form, .shopify-product-form', $product);\n  const variantInventory = $productForm.data('variant-inventory');\n\n  // Manually trigger change event so\n  // pure JS listeners can receive it\n  evt.initEvent('change', false, true);\n  selector.variantIdField.dispatchEvent(evt);\n\n  // Notify form\n\n  const $notifyForm = $(`.notify-form-${selector.product.id}`);\n  const productTitle = $notifyForm.data('product-title');\n  const $notifyFormInputs = $('.notify_form__inputs', $product);\n  const notifySend = window.PXUTheme.translation.notify_email_send;\n  const notifyUrl = $notifyFormInputs.data('url');\n\n  // Construct the notify message\n  if (variant) {\n    if (variant.title !== 'Default Title') {\n      // Escape the variant title\n      window.variantTitle = variant.title.replace(/\"/g, '&quot;');\n      window.notifyMessage = window.PXUTheme.translation.notify_message_first + productTitle + ' - ' + window.variantTitle + window.PXUTheme.translation.notify_message_last + notifyUrl;\n    } else {\n      window.notifyMessage = window.PXUTheme.translation.notify_message_first + productTitle + window.PXUTheme.translation.notify_message_last + notifyUrl;\n    }\n  }\n\n  // Prefill the email address if a customer is logged in\n  let notifyFormEmail;\n  let notifyFormPlaceholder;\n\n  if ($notifyForm.hasClass('notify-form--customer')) {\n    notifyFormEmail = $notifyForm.data('customer-email');\n    notifyFormPlaceholder = '';\n  } else {\n    notifyFormEmail = '';\n    notifyFormPlaceholder = window.PXUTheme.translation.notify_email;\n  }\n\n  // Compile HTML\n  window.notifyFormHTML = `\n    <input\n      class=\"notify-email\"\n      id=\"contact[email]\"\n      name=\"contact[email]\"\n      type=\"email\"\n      placeholder=\"${notifyFormPlaceholder}\"\n      value=\"${notifyFormEmail}\"\n      required\n    >\n\n    <input\n      type=\"hidden\"\n      name=\"challenge\"\n      value=\"false\"\n    >\n\n    <input\n      class=\"notify_form_message\"\n      name=\"contact[body]\"\n      type=\"hidden\"\n      data-body=\"${window.notifyMessage}\"\n      value=\"${window.notifyMessage}\"\n    >\n\n    <input\n      class=\"\n        global-button\n        global-button--primary\n      \"\n      type=\"submit\"\n      value=\"${notifySend}\"\n    >\n  `;\n\n  // Image Variant feature\n  if (variant && $product.is(':visible')) {\n    const $sliders = $('.js-product-gallery', $product);\n\n    $sliders.each((_, slider) => {\n      const $slider = $(slider);\n      const $sliderInstance = window.Flickity.data($slider[0]);\n\n      if ($slider && $sliderInstance !== undefined) {\n        let index;\n\n        if (variant.featured_image) {\n          // Determine the index of the image associated with the selected variant.\n          index = $(`[data-image-id=\"${variant.featured_media.id}\"]`).data('index');\n        } else {\n          // Default to the first product image.\n          index = 0;\n        }\n\n        $sliderInstance.select(index, false, true);\n      }\n    });\n  }\n\n  // Show only selected variant image feature\n  if (window.showOnlySelectedVariantImage) {\n    $productGallery = $product.find('[data-product-gallery]');\n    $thumbnailProductGallery = $product.find('.product_gallery_nav');\n\n    const updateGallery = ($gallery, mediaArray) => {\n      const flickityInstance = $gallery.data('flickity');\n      const selectedVariantMediaId = variant.featured_media ? String(variant.featured_media.id) : null;\n\n      let firstMediaItem = null;\n\n      mediaArray.forEach(mediaItem => {\n        const $mediaItem = $(mediaItem);\n        const mediaId = String($mediaItem.data('media-id'));\n        const isVariantSpecificImage = String($mediaItem.data('media-variant-image')) === 'true';\n\n        if (!firstMediaItem) {\n          firstMediaItem = $mediaItem[0];\n        }\n\n        if (isVariantSpecificImage) {\n          if (flickityInstance) {\n            $gallery.flickity('remove', $mediaItem[0]);\n            $gallery.on('settle.flickity', () => {\n              const cellElements = $gallery.flickity('getCellElements');\n              if (cellElements.length > 0) {\n                $gallery.flickity('select', 0, false, true);\n              }\n              $gallery.off('settle.flickity');\n            });\n          } else {\n            $mediaItem.remove();\n          }\n        }\n\n        if (mediaId === selectedVariantMediaId) {\n          if (flickityInstance) {\n            $gallery.flickity('prepend', $mediaItem[0], true);\n            $gallery.on('settle.flickity', () => {\n              const cellElements = $gallery.flickity('getCellElements');\n              const index = cellElements.indexOf($mediaItem[0]);\n              $gallery.flickity('select', index, false, true);\n              $gallery.off('settle.flickity');\n            });\n          } else {\n            $gallery.prepend($mediaItem[0]);\n          }\n        }\n      });\n\n      if (selectedVariantMediaId === null && firstMediaItem) {\n        if (flickityInstance) {\n          if ($gallery.find(firstMediaItem).length === 0) {\n            $gallery.flickity('prepend', firstMediaItem, true);\n            $gallery.on('settle.flickity', () => {\n              const cellElements = $gallery.flickity('getCellElements');\n              const index = cellElements.indexOf(firstMediaItem);\n              $gallery.flickity('select', index, false, true);\n              $gallery.off('settle.flickity');\n            });\n          }\n        } else {\n          if ($gallery.find(firstMediaItem).length === 0) {\n            $gallery.prepend(firstMediaItem);\n          }\n        }\n      }\n\n      $gallery.resize();\n\n      const thumbnailCount = $thumbnailProductGallery.data('flickity')?.cells.length || 0;\n      if (thumbnailCount >= 5) {\n        $thumbnailProductGallery.removeClass('flickity-hide-prev-next');\n      } else {\n        $thumbnailProductGallery.addClass('flickity-hide-prev-next');\n      }\n    };\n\n    updateGallery($productGallery, window.productGalleryMedia);\n    updateGallery($thumbnailProductGallery, window.thumbnailGalleryMedia);\n  }\n\n  // Toggles images in product slider when inline quickshop and layout set to slider\n  if (variant && variant.featured_image && $product.is(':visible')) {\n    if (window.PXUTheme.theme_settings.product_form_style === 'select' && window.PXUTheme.theme_settings.quick_shop_style === 'inline') {\n      const $selectedVariants = $('.products-slider').find('select option:not(.selector-wrapper select option)').filter(':selected');\n      $selectedVariants.each(function toggleImage() {\n        if ($(this).data('featured-image')) {\n          const swatchImage = $(this).data('image');\n          const $quickShopElement = $(this).parents('.thumbnail').find('.image__container img');\n\n          $quickShopElement.attr('src', swatchImage);\n          $quickShopElement.attr('srcset', swatchImage);\n        }\n      });\n    }\n  }\n\n  if (variant) {\n    if (variantInventory) {\n      variantInventory.forEach(v => {\n        if (v.id === variant.id) {\n          const currentVariant = variant;\n          currentVariant.inventory_quantity = v.inventory_quantity;\n          currentVariant.inventory_management = v.inventory_management;\n          currentVariant.inventory_policy = v.inventory_policy;\n        }\n      });\n    }\n\n    $('.sku span', $product).text(variant.sku);\n\n    if (window.PXUTheme.theme_settings.product_form_style === 'radio') {\n      const { length } = variant.options;\n      for (let i = 0; i < length; i++) {\n        const radioButton = $productForm.find(`.swatch[data-option-index=\"${escape(i)}\"] :radio[value=\"${variant.options[i].replace(/\"/g, '\\\\\"')}\"]`);\n        if (radioButton.length) {\n          radioButton.get(0).checked = true;\n        }\n      }\n    } else {\n      $('.notify_form_message', $product).attr('value', `${$('.notify_form_message', $product).data('body')} - ${window.variantTitle}`);\n    }\n  }\n\n  if (variant && variant.available === true) {\n    if (variant.inventory_management && variant.inventory_quantity > 0) {\n      if (window.PXUTheme.theme_settings.display_inventory_left) {\n        if (variant.inventory_quantity === 1) {\n          window.itemsLeftText = window.PXUTheme.translation.one_item_left;\n        } else {\n          window.itemsLeftText = window.PXUTheme.translation.items_left_text;\n        }\n\n        const inventoryThreshold = parseInt(window.PXUTheme.theme_settings.inventory_threshold, 10);\n        if (variant.inventory_quantity <= inventoryThreshold) {\n          $('.items_left', $product).html(`${variant.inventory_quantity} ${window.itemsLeftText}`);\n        } else {\n          $('.items_left', $product).html('');\n        }\n      }\n      if (window.PXUTheme.theme_settings.limit_quantity) {\n        if (variant.inventory_policy === 'deny') {\n          $('.quantity', $product).attr('max', variant.inventory_quantity);\n        }\n      }\n    } else {\n      $('.items_left', $product).text('');\n      $('.quantity', $product).removeAttr('max');\n    }\n\n    $('.sold_out', $product).text('');\n    $('.add_to_cart', $product).removeClass('disabled').removeAttr('disabled').find('span')\n      .text($('.add_to_cart', $product).data('label'));\n    $('.shopify-payment-button', $product).removeClass('disabled');\n    $('.purchase-details__buttons', $product).removeClass('product-is-unavailable');\n    $('.modal_price', $product).removeClass('variant-unavailable');\n    $product.find($notifyForm).hide();\n    $product.find($notifyFormInputs).empty();\n  } else {\n    // When product is sold out\n    const message = variant ? window.PXUTheme.translation.sold_out_text : window.PXUTheme.translation.unavailable_text;\n\n    if (variant) {\n      $('.modal_price', $product).removeClass('variant-unavailable');\n    } else {\n      // Add class to quickshop so we know variant is unavailable\n      $('.modal_price', $product).addClass('variant-unavailable');\n    }\n\n    $('.items_left', $product).text('');\n    $('.quantity', $product).removeAttr('max');\n    $('.sold_out', $product).text(message);\n    $('.purchase-details__buttons', $product).addClass('product-is-unavailable');\n    $('.add_to_cart', $product).addClass('disabled').attr('disabled', 'disabled').find('span')\n      .text(message);\n    $('.shopify-payment-button', $product).addClass('disabled');\n    $notifyForm.hide();\n    $notifyFormInputs.empty();\n\n    if (variant && !variant.available) {\n      $notifyForm.fadeIn();\n      $notifyFormInputs.empty();\n      $notifyFormInputs.append(window.notifyFormHTML);\n    }\n  }\n\n  if (window.PXUTheme.currency.show_multiple_currencies) {\n    window.currencyConverter.convertCurrencies();\n  }\n};\n\nwindow.productPage = {\n  loadQuickshop(url) {\n    return window.shopifyAsyncview.load(\n      url, // Template name\n      { view: 'quickshop' }, // View name (suffix)\n    );\n  },\n  init() {\n    window.Shopify.loadFeatures([\n      {\n        name: 'shopify-xr',\n        version: '1.0',\n      },\n      {\n        name: 'model-viewer-ui',\n        version: '1.0',\n      },\n    ], window.productMedia.setupMedia);\n\n    // Call enable gallery function for product galleries\n    $('[data-product-gallery]:not(.product-recommendations [data-product-gallery])').each(function () {\n      const $productGallery = $(this);\n      window.productPage.enableGallery($productGallery);\n    });\n\n    if (window.location.search === '?contact_posted=true') {\n      $('.notify-form .contact-form').hide();\n      $('.notify-form .contact-form').prev('.message').html(window.PXUTheme.translation.notify_success_text);\n    }\n\n    if (window.PXUTheme.theme_settings.product_form_style === 'radio') {\n      $('body').on('change', '.swatch :radio', function swatchLogic() {\n        const optionIndex = $(this).closest('.swatch').attr('data-option-index');\n        const optionValue = $(this).val();\n        const parentForm = $(this).closest('.product_form form');\n        let notifyForm;\n\n        if (parentForm.siblings('.notify-form').length) {\n          window.notifyForm = parentForm.siblings('.notify-form');\n        } else {\n          window.notifyForm = $('.js-notify-form');\n        }\n\n        const option1 = parentForm.find('.swatch_options input:checked').eq(0).val();\n        const option2 = parentForm.find('.swatch_options input:checked').eq(1).val() || '';\n        const option3 = parentForm.find('.swatch_options input:checked').eq(2).val() || '';\n        let notifyMessage;\n\n        if (option1 && option2 && option3) {\n          window.notifyMessage = `${option1} / ${option2} / ${option3}`;\n        } else if (option1 && option2) {\n          window.notifyMessage = `${option1} / ${option2}`;\n        } else {\n          window.notifyMessage = option1;\n        }\n\n        window.notifyForm.find('.notify_form_message').attr('value', `${window.notifyForm.find('.notify_form_message').data('body')} - ${window.notifyMessage}`);\n\n        $(this)\n          .closest('form')\n          .find('.single-option-selector')\n          .eq(optionIndex)\n          .val(optionValue)\n          .trigger('change');\n      });\n    }\n\n    $('.js-product-gallery a').fancybox({\n      width: 800,\n      height: 800,\n      baseClass: 'product-section__lightbox',\n      clickContent: false,\n      afterShow(instance) {\n        // Loop through fancybox images, add alt attributes\n        const fancyImages = $('.fancybox-image');\n        $('.product-gallery__image').each((index, image) => {\n          const $image = $(image);\n          const alt = $image.attr('alt');\n          fancyImages.eq(index).attr('alt', alt);\n        });\n\n        const zoom = instance.$trigger.first().parents('.js-product-gallery').data('zoom');\n        if (zoom) {\n          $('.fancybox-image').last()\n            .wrap('<span class=\"zoom-wrap\" style=\"display:inline-block\"></span>')\n            .css('display', 'block')\n            .parent()\n            .zoom({\n              touch: false,\n              magnify: 1,\n            });\n        }\n      },\n      afterClose(instance) {\n        const $instanceGallery = instance.$trigger.first().parents('.js-product-gallery');\n        $instanceGallery.hide();\n        setTimeout(() => {\n          $instanceGallery.fadeIn(100);\n          $('.js-product-gallery').find('.is-selected a').focus();\n        }, 1);\n      },\n    });\n\n    const recipientFormEl = document.querySelector('[data-recipient-form]');\n\n    if (recipientFormEl) {\n      const sectionEl = recipientFormEl.closest('.product_section');\n      this.recipientForm = new RecipientForm(sectionEl);\n    }\n\n    // Complementary products\n    const complementaryProductsEl = document.querySelector('[data-complementary-products]');\n\n    if (complementaryProductsEl) {\n      const sectionEl = complementaryProductsEl.closest('.product_section');\n      const {\n        sectionId,\n        productId,\n        productRecommendationLimit,\n      } = JSON.parse(document.querySelector('[data-complementary-products-data]').textContent);\n\n      this.complementaryProductRecommendations = new ComplementaryProducts({\n        sectionEl,\n        sectionId,\n        productId,\n        productRecommendationsRoute: window.PXUTheme.routes.product_recommendations_url,\n        includeIndicatorDots: true,\n        limit: productRecommendationLimit,\n        arrowShape: 'M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z',\n      });\n    }\n\n    /*\n      If the product recommendations section exists, run the loadProductRecommendations method\n      The selectCallback within this method will only affect the products in the product recommendations section\n    */\n    if ($('.shopify-section--recommended-products').length) {\n      window.productPage.loadProductRecommendations();\n    }\n  },\n  runOptionSelector($element) {\n    let $defaultSelector = $('.js-product-section [data-product-form]:not(.product-recommendations .js-product-section [data-product-form])');\n\n    if ($element) {\n      $defaultSelector = $element.find('[data-product-form]');\n    }\n\n    $defaultSelector.each((_, options) => {\n      const $options = $(options);\n      const $productDetails = $options.closest('.product__details');\n\n      // Set up variables for price ui and surface pickup\n      let priceUIEl;\n\n      const paymentTerms = new window.PaymentTerms($productDetails[0]);\n\n      // If smaller screen size and thumbnail hover enabled\n      // use price ui element inside of caption instead\n      if (window.PXUTheme.media_queries.medium.matches && window.PXUTheme.theme_settings.hover_enabled && window.PXUTheme.theme_settings.quick_shop_enabled && window.PXUTheme.theme_settings.quick_shop_style === 'inline') {\n        priceUIEl = $productDetails.find('.modal_price [data-price-ui], .product-info__caption [data-price-ui]')[0];\n      } else {\n        priceUIEl = $productDetails.find('[data-price-ui]')[0];\n      }\n\n      const priceUIBadgeEl = $productDetails.find('[data-price-ui-badge]')[0];\n      const surfacePickUpEl = $productDetails.find('[data-surface-pick-up]')[0];\n      const JSONData = $options.data('product');\n      const isPriceSavingsEnabled = priceUIEl && priceUIEl.closest(['[data-display-savings=\"true\"]']);\n      const isPercentEnabled = priceUIBadgeEl && priceUIBadgeEl.closest(['[data-display-percent=\"true\"]']);\n      const productTitle = $options.data('product-title');\n\n      let priceUI;\n      let priceUIBadge;\n      let surfacePickUp;\n      let currentVariant;\n\n      if (priceUIEl) {\n        priceUI = new window.ShopifyPriceUI.PriceUI(priceUIEl);\n      }\n\n      if (priceUIBadgeEl) {\n        priceUIBadge = new window.ShopifyPriceUI.PriceUIBadge(priceUIBadgeEl);\n      }\n\n      if (surfacePickUpEl) {\n        surfacePickUp = new window.ShopifySurfacePickUp(surfacePickUpEl);\n        surfacePickUp.onModalRequest(contents => {\n          const surfacePickUpModal = document.querySelector('[data-surface-pick-up-modal]');\n          let fragment;\n          if (currentVariant.title && productTitle) {\n            fragment = document.createDocumentFragment();\n            const header = document.createElement('div');\n            const title = document.createElement('h2');\n            header.classList.add('surface-pick-up__modal-header');\n            title.classList.add('surface-pick-up__modal-title');\n            title.innerHTML = productTitle;\n            header.appendChild(title);\n            if (currentVariant.title !== 'Default Title') {\n              const subtitle = document.createElement('span');\n              subtitle.classList.add('surface-pick-up__modal-subtitle');\n              subtitle.innerHTML = currentVariant.title;\n              header.appendChild(subtitle);\n            }\n            fragment.appendChild(header);\n          }\n          surfacePickUpModal.innerHTML = contents;\n          surfacePickUpModal.insertBefore(fragment, surfacePickUpModal.firstChild);\n          $.fancybox.open(\n            surfacePickUpModal,\n            {\n              hash: false,\n              infobar: false,\n              toolbar: false,\n              loop: true,\n              smallBtn: true,\n              touch: false,\n              video: {\n                autoStart: false,\n              },\n              mobile: {\n                preventCaptionOverlap: false,\n                toolbar: true,\n              },\n            },\n          );\n        });\n      }\n\n      new window.Shopify.OptionSelectors($options.data('select-id'), {\n        product: $options.data('product'),\n        onVariantSelected: (variant, selector) => {\n          currentVariant = variant;\n\n          paymentTerms.update(variant ? variant.id : null);\n\n          if (priceUI) {\n            priceUI.load(\n              JSONData,\n              {\n                variant,\n                formatter: price => window.Shopify.formatMoney(price, $('body').data('money-format')),\n                handler: (priceUIFragment, _product, { variant: v }) => {\n                  if (isPriceSavingsEnabled && v) {\n                    if (v.compare_at_price > v.price) {\n                      const span = document.createElement('span');\n                      span.classList.add('sale', 'savings');\n                      const savings = v.compare_at_price - v.price;\n                      const percentage = Math.round((savings / v.compare_at_price) * 100);\n                      span.innerHTML = `${window.PXUTheme.translation.savings_text} ${percentage}% (<span class=\"money\">${window.Shopify.formatMoney(v.compare_at_price - v.price, $('body').data('money-format'))}</span>)`;\n\n                      priceUIFragment.appendChild(span);\n                    }\n                  }\n\n                  if (v && v.available) {\n                    if (v.price === 0) {\n                      const fragment = document.createDocumentFragment();\n                      const span = document.createElement('span');\n                      span.classList.add('free-price-text');\n\n                      if (window.PXUTheme.theme_settings.free_text !== '') {\n                        span.innerHTML = window.PXUTheme.theme_settings.free_text;\n                      } else {\n                        span.innerHTML = `<span class=\"money\">${window.Shopify.formatMoney(v.price, $('body').data('money-format'))}</span>`;\n                      }\n\n                      fragment.appendChild(span);\n\n                      return fragment;\n                    }\n\n                    return priceUIFragment;\n                  }\n\n                  if (!window.PXUTheme.theme_settings.display_sold_out_price) {\n                    const fragment = document.createDocumentFragment();\n                    const soldOutText = document.createElement('span');\n                    soldOutText.classList.add('sold_out');\n                    soldOutText.innerHTML = v\n                      ? window.PXUTheme.translation.sold_out_text\n                      : window.PXUTheme.translation.unavailable_text;\n                    fragment.appendChild(soldOutText);\n                    return fragment;\n                  }\n\n                  // Displays sold out text beside price\n                  if (window.PXUTheme.theme_settings.display_sold_out_price) {\n                    const span = document.createElement('span');\n\n                    span.classList.add('sold_out');\n                    span.innerHTML = v\n                      ? window.PXUTheme.translation.sold_out_text\n                      : window.PXUTheme.translation.unavailable_text;\n\n                    priceUIFragment.appendChild(span);\n                  }\n\n                  return priceUIFragment;\n                },\n              },\n            );\n\n            if (window.PXUTheme.theme_settings.display_sold_out_price && variant && variant.price === 0 && !variant.available) {\n              const priceElement = priceUIEl.querySelector('[data-price]');\n              if (!priceElement) { return; }\n              if (window.PXUTheme.theme_settings.free_text !== '') {\n                const span = document.createElement('span');\n                span.classList.add('free-price-text');\n                span.innerHTML = window.PXUTheme.theme_settings.free_text;\n                priceElement.innerHTML = '';\n                priceElement.appendChild(span);\n              } else if (window.PXUTheme.theme_settings.free_text === '') {\n                priceElement.classList.add('price--sale');\n                return;\n              }\n            }\n          }\n\n          if (priceUIBadge) {\n            priceUIBadge.load(\n              JSONData,\n              {\n                variant,\n                style: 'default',\n                formatter: price => window.Shopify.formatMoney(price, $('body').data('money-format')),\n                handler: (priceUIFragment, _product, { variant: v }) => {\n                  if (v && v.available) {\n                    if (v.compare_at_price > v.price) {\n                      const fragment = document.createDocumentFragment();\n                      let text;\n                      const sticker = document.createElement('div');\n                      sticker.classList.add('price-ui-badge__sticker');\n                      const stickerText = document.createElement('span');\n                      stickerText.classList.add('price-ui-badge__sticker-text');\n                      stickerText.setAttribute('data-badge', '');\n\n                      if (isPercentEnabled) {\n                        const savings = v.compare_at_price - v.price;\n                        const percentage = Math.round((savings / v.compare_at_price) * 100);\n                        text = ` ${percentage}${window.PXUTheme.translation.percent_off_text}`;\n                      }\n                      else {\n                        text = ` ${window.PXUTheme.translation.sale_text}`;\n                      }\n\n                      stickerText.innerHTML = text;\n                      sticker.appendChild(stickerText);\n                      fragment.appendChild(sticker);\n                      return fragment;\n                    }\n\n                    if (!v.compare_at_price || v.compare_at_price <= v.price) {\n                      return document.createDocumentFragment();\n                    }\n\n                    return priceUIFragment;\n                  }\n\n                  if ((v && !v.available) || !v) {\n                    const fragment = document.createDocumentFragment();\n                    let text;\n                    const sticker = document.createElement('div');\n                    sticker.classList.add('price-ui-badge__sticker');\n                    const stickerText = document.createElement('span');\n                    stickerText.classList.add('price-ui-badge__sticker-text');\n                    stickerText.setAttribute('data-badge', '');\n\n                    if (v && !v.available) {\n                      sticker.classList.add('price-ui-badge__sticker--sold-out');\n                      text = window.PXUTheme.translation.sold_out_text;\n                    }\n\n                    if (!v) {\n                      sticker.classList.add('price-ui-badge__sticker--unavailable');\n                      text = window.PXUTheme.translation.unavailable_text;\n                    }\n\n                    stickerText.innerHTML = text;\n                    sticker.appendChild(stickerText);\n                    fragment.appendChild(sticker);\n                    return fragment;\n                  }\n\n                  return priceUIFragment;\n                },\n              },\n            );\n          }\n\n          // Avoid loading surface pickup for the inline quick shop\n          if (surfacePickUp && !$options.closest('.js-product-section').hasClass('inline-quickshop')) {\n            surfacePickUp.load(variant ? variant.id : null);\n          }\n\n          window.selectCallback(variant, selector, $element);\n        },\n        enableHistoryState: $options.data('enable-state'),\n      });\n    });\n  },\n  enableGallery(selector) {\n    // Variables\n    const $productGallery = $(selector);\n    const $slides = $productGallery.find('.gallery-cell');\n    const $thumbnailProductGallery = $productGallery.closest('.js-product-section').find('.product_gallery_nav');\n    const $thumbnails = $thumbnailProductGallery.find('.gallery-cell');\n    const zoom = $productGallery.data('zoom');\n    const productLightbox = $productGallery.data('product-lightbox');\n    const thumbnailsEnabled = $productGallery.data('thumbnails-enabled');\n    const thumbnailsSliderEnabled = $productGallery.data('thumbnails-slider-enabled');\n    const thumbnailsPosition = $productGallery.data('thumbnails-position');\n    const thumbnailsArrows = $productGallery.data('gallery-arrows-enabled');\n    const slideshowSpeed = $productGallery.data('slideshow-speed');\n\n    window.showOnlySelectedVariantImage = $productGallery.closest('[data-show-only-selected-variant-image]').length > 0;\n\n    // If zoom enabled\n    if (zoom === true) {\n      if (window.is_touch_device() && window.PXUTheme.media_queries.medium.matches) {\n        // Lightbox has a built-in zoom feature, so check if lightbox is disabled\n        if (productLightbox === 'false') {\n          document.addEventListener('lazybeforeunveil', window.imageFunctions.zoom);\n        }\n      } else {\n        document.addEventListener('lazybeforeunveil', window.imageFunctions.zoom);\n        window.imageFunctions.zoom($productGallery.find('[data-zoom-src]').first());\n      }\n    }\n\n    $productGallery.on('ready.flickity', () => {\n      $slides.each((index, slide) => {\n        // Determine media type\n        const mediaType = $(slide).data('media-type') || $(slide).find('[data-media-type]').data('media-type');\n        let videoID;\n\n        switch (mediaType) {\n          case 'external_video':\n\n            videoID = $(slide).find('[data-plyr-video-id]').data('plyr-video-id');\n\n            if (window.videoPlayers) {\n              window.videoPlayers.forEach(player => {\n                const currentPlayer = player;\n                if (player.id === videoID || player.media.id === videoID) {\n                  if (!$(slide).hasClass('is-selected')) {\n                    currentPlayer.keyboard = {\n                      focused: false,\n                      global: false,\n                    };\n                  }\n                }\n              });\n            }\n            break;\n          case 'video':\n\n            videoID = $(slide).find('[data-plyr-video-id]').data('plyr-video-id');\n\n            if (window.videoPlayers) {\n              window.videoPlayers.forEach(player => {\n                const currentPlayer = player;\n                if (player.id === videoID || player.media.id === videoID) {\n                  if (!$(slide).hasClass('is-selected')) {\n                    currentPlayer.keyboard = {\n                      focused: false,\n                      global: false,\n                    };\n                  }\n                }\n              });\n            }\n            break;\n          case 'model':\n            if ($(slide).hasClass('is-selected')) { // When active slide\n              if (mediaType === 'model' && window.isScreenSizeLarge()) {\n                $(slide).on('mouseenter', () => {\n                  $productGallery.flickity('unbindDrag');\n                });\n                $(slide).on('mouseleave', () => {\n                  $productGallery.flickity('bindDrag');\n                });\n              }\n            }\n            break;\n          default:\n            break;\n        }\n      });\n\n      // Video looping\n      const loopingEnabled = $productGallery.data('video-loop');\n\n      $.each(window.videoPlayers, (index, player) => {\n        const videoPlayer = player;\n        videoPlayer.loop = loopingEnabled;\n      });\n    });\n\n    $productGallery.on('change.flickity', () => {\n      $slides.each((index, slide) => {\n        // Determine media type of current slide\n        const mediaType = $(slide).data('media-type') || $(slide).find('[data-media-type]').data('media-type');\n\n        if ($(slide).hasClass('is-selected')) { // When active slide\n          switch (mediaType) {\n            case 'model':\n\n              /* On slide change, if active slide contains 3d model\n              * If on desktop, on hover, unbind flickity, after hover bind flickity\n              * On model play event, unbind flickity to ensure model can be interacted with\n              * On model pause event, bind flickity so that slide can be swiped\n              * Pause all model slides when hidden\n              */\n\n              if (window.isScreenSizeLarge()) {\n                // On mouseenter event, unbind flickity\n                $(slide).on('mouseenter', () => {\n                  $productGallery.flickity('unbindDrag');\n                });\n\n                // On mouseleave event, bind flickity\n                $(slide).on('mouseleave', () => {\n                  $productGallery.flickity('bindDrag');\n                });\n              }\n\n              // Listen for model pause/play events\n              $(slide).find('model-viewer').on('shopify_model_viewer_ui_toggle_play', () => {\n                $productGallery.flickity('unbindDrag');\n              });\n\n              $(slide).find('model-viewer').on('shopify_model_viewer_ui_toggle_pause', () => {\n                $productGallery.flickity('bindDrag');\n              });\n              break;\n            default:\n              $productGallery.flickity('bindDrag');\n              break;\n          }\n        } else {\n          // When inactive slide\n          switch (mediaType) {\n            case 'external_video':\n              // Youtube video pausing\n              $.each(window.videoPlayers, (_index, player) => {\n                player.pause();\n              });\n              break;\n            case 'video':\n              // HTML5 video pausing\n              $.each(window.videoPlayers, (_index, player) => {\n                player.pause();\n              });\n              break;\n            default: break;\n          }\n        }\n      });\n\n      // Restore 3d model icons\n      window.productMedia.showModelIcon($productGallery);\n    });\n\n    $productGallery.flickity({\n      wrapAround: true,\n      adaptiveHeight: true,\n      dragThreshold: 10,\n      imagesLoaded: true,\n      pageDots: false,\n      prevNextButtons: $productGallery.data('media-count') > 1 || $slides.length > 1,\n      autoPlay: slideshowSpeed * 1000,\n      watchCSS: false,\n    });\n\n    // Adjust arrows height if controls are hidden/shown\n    $.each(window.videoPlayers, (index, player) => {\n      // When controls are hidden, height should be auto\n      player.on('controlshidden', () => {\n        $productGallery.find('.flickity-prev-next-button').css('height', 'auto');\n      });\n      // When controls are shown, height should account for controls bar\n      player.on('controlsshown', () => {\n        $productGallery.find('.flickity-prev-next-button').css('height', 'calc(100% - 64px)');\n      });\n    });\n\n    function autoplayVideo(videoID, $slide) {\n      // Compare id to player object and only play that video\n      $.each(window.videoPlayers, (index, player) => {\n        if (parseInt(player.media.dataset.plyrVideoId, 10) === videoID) {\n          player.play();\n\n          // On fullscreen toggle, focus back on the slide itself\n          player.on('exitfullscreen', () => {\n            $slide.closest('.product-gallery').find('.product-gallery__thumbnails').focus();\n          });\n        }\n      });\n    }\n\n    function autoplayYoutubeVideo(iframeID, $slide) {\n      // compare id to player object and only play that video\n      $.each(window.videoPlayers, (index, player) => {\n        if (player.playing) {\n          player.pause();\n        }\n\n        if (player.media.id === iframeID) {\n          player.play();\n\n          // On fullscreen toggle, focus back on the slide itself\n          player.on('exitfullscreen', () => {\n            $slide.closest('.product-gallery').find('.product-gallery__thumbnails').focus();\n          });\n        }\n      });\n    }\n\n    function checkForVideos() {\n      $slides.each((index, slide) => {\n        // Variables\n        const $slide = $(slide);\n        const mediaType = $slide.data('media-type') || $slide.find('[data-media-type]').data('media-type');\n        let videoID = $slide.find('video').data('plyr-video-id');\n        const $iframeVideo = $slide.find('iframe');\n        const iframeID = $iframeVideo.attr('id');\n\n        if ($slide.hasClass('is-selected')) {\n          if (mediaType === 'video') {\n            videoID = $slide.find('video').data('plyr-video-id');\n            if (videoID) {\n              autoplayVideo(videoID, $slide);\n            }\n          } else if (mediaType === 'external_video' && iframeID) {\n            autoplayYoutubeVideo(iframeID, $slide);\n          }\n        }\n      });\n    }\n\n    // Checks for videos and plays them if they are the featured media\n    // Autoplay logic only happens on desktop, autoplay set to off for mobile\n    const $sliderArrows = $productGallery.find('.flickity-prev-next-button');\n\n    if (($sliderArrows || $thumbnails) && window.isScreenSizeLarge()) {\n      $sliderArrows.on('click', () => {\n        const pId = $productGallery.data('product-id');\n\n        $productGallery.on('settle.flickity', () => {\n          // Find out media type of featured media slide\n          const $selectedSlide = $productGallery.find('.gallery-cell.is-selected');\n          const mediaType = $selectedSlide.data('media-type') || $selectedSlide.find('[data-media-type]').data('media-type');\n\n          // Run video autoplay logic if featured media is a video\n          if (mediaType === 'video' || mediaType === 'external_video') {\n            checkForVideos();\n          }\n\n          // Autoplay model if featured media is a model\n          if (mediaType === 'model') {\n            // If model container has class is-selected then play the model\n            const sortedModels = [];\n            $.each(window.productMedia.models, model => {\n              if ($(model.container).closest('.gallery-cell').data('product-id') === pId) {\n                sortedModels.push(model);\n              }\n            });\n\n            $.each(sortedModels, model => {\n              const $slide = $(model.container).closest('.gallery-cell');\n              if ($slide.hasClass('is-selected')) {\n                model.play();\n              }\n            });\n          }\n          $productGallery.off('settle.flickity');\n        });\n\n        return false;\n      });\n\n      $thumbnails.on('click', event => {\n        const index = $(event.currentTarget).index();\n        const pId = $productGallery.data('product-id');\n        $productGallery.flickity('select', index);\n\n        $productGallery.on('settle.flickity', () => {\n          // Find out media type of featured media slide\n          const $selectedSlide = $productGallery.find('.gallery-cell.is-selected');\n          const mediaType = $selectedSlide.data('media-type') || $selectedSlide.find('[data-media-type]').data('media-type');\n\n          // Run video autoplay logic if featured media is a video\n          if (mediaType === 'video' || mediaType === 'external_video') {\n            checkForVideos();\n          }\n\n          // Autoplay model if featured media is a model\n          if (mediaType === 'model') {\n            // If model container has class is-selected then play the model\n            const sortedModels = [];\n            $.each(window.productMedia.models, (_index, model) => {\n              if ($(model.container).closest('.gallery-cell').data('product-id') === pId) {\n                sortedModels.push(model);\n              }\n            });\n\n            $.each(sortedModels, (_index, model) => {\n              const $slide = $(model.container).closest('.gallery-cell');\n              if ($slide.hasClass('is-selected')) {\n                model.play();\n              }\n            });\n          }\n          $productGallery.off('settle.flickity');\n        });\n        return false;\n      });\n\n      $thumbnails.keypress(event => {\n        const index = $(event.currentTarget).index();\n        const pId = $productGallery.data('product-id');\n        if (event.which === 13) {\n          $productGallery.flickity('select', index);\n\n          const $selectedSlide = $productGallery.find('.gallery-cell.is-selected');\n\n          $productGallery.on('settle.flickity', () => {\n            $selectedSlide.find('[data-youtube-video]').attr('tabindex', '0');\n            $selectedSlide.find('model-viewer, .plyr, a').focus();\n            $productGallery.off('settle.flickity');\n          });\n\n          // Find out media type of featured media slide\n          const mediaType = $selectedSlide.data('media-type') || $selectedSlide.find('[data-media-type]').data('media-type');\n\n          // Run video autoplay logic if featured media is a video\n          if (mediaType === 'video' || mediaType === 'external_video') {\n            checkForVideos();\n          }\n\n          // Autoplay model if featured media is a model\n          if (mediaType === 'model') {\n            // If model container has class is-selected then play the model\n            const sortedModels = [];\n            $.each(window.productMedia.models, model => {\n              if ($(model.container).closest('.gallery-cell').data('product-id') === pId) {\n                sortedModels.push(model);\n              }\n            });\n\n            $.each(sortedModels, model => {\n              const $slide = $(model.container).closest('.gallery-cell');\n              if ($slide.hasClass('is-selected')) {\n                model.play();\n              }\n            });\n          }\n          return false;\n        }\n        return undefined;\n      });\n    }\n\n    if (window.showOnlySelectedVariantImage) {\n      window.productGalleryMedia = [];\n      window.thumbnailGalleryMedia = [];\n\n      const removeVariantImages = ($elements, $gallery, mediaArray) => {\n        const flickityInstance = $gallery.data('flickity');\n\n        $elements.each((index, element) => {\n          const $element = $(element);\n          const mediaVariantImage = $element.data('media-variant-image');\n\n          mediaArray.push($element);\n\n          if (mediaVariantImage) {\n            if (flickityInstance) {\n              $gallery.flickity('remove', $element[0]);\n            } else {\n              $gallery.find($element[0]).remove();\n            }\n          }\n        });\n      };\n\n      removeVariantImages($slides, $productGallery, window.productGalleryMedia);\n      removeVariantImages($thumbnails, $thumbnailProductGallery, window.thumbnailGalleryMedia);\n    }\n\n    // Thumbnail gallery logic begins\n    if (thumbnailsEnabled === true && thumbnailsSliderEnabled === true && $slides.length > 1) {\n      // If desktop determine which slider we build\n      if (window.PXUTheme.media_queries.large.matches) {\n        // If thumbnail position is left/right then vertical slider gets enabled\n        if (thumbnailsPosition === 'left' || thumbnailsPosition === 'right') {\n          $thumbnailProductGallery.css('max-height', $productGallery.closest('.product-gallery').outerHeight());\n          $thumbnailProductGallery.addClass('vertical-slider-enabled');\n\n          $thumbnails.on('click', event => {\n            const index = $(event.currentTarget).index();\n            $productGallery.flickity('select', index);\n          });\n\n          const navCellHeight = $thumbnails.height();\n          const navHeight = $thumbnailProductGallery.height();\n\n          $productGallery.on('select.flickity', () => {\n            // set selected nav cell\n            const flkty = $productGallery.data('flickity');\n            $thumbnailProductGallery.find('.is-nav-selected').removeClass('is-nav-selected');\n            const $selected = $thumbnails.eq(flkty.selectedIndex).addClass('is-nav-selected');\n\n            // scroll nav\n            const scrollY = $selected.position().top + $thumbnailProductGallery.scrollTop() - (navHeight + navCellHeight) / 2;\n            $thumbnailProductGallery.animate({\n              scrollTop: scrollY,\n            });\n          });\n        } else {\n          $thumbnailProductGallery.flickity({\n            cellAlign: 'center',\n            contain: true,\n            groupCells: '80%',\n            imagesLoaded: true,\n            pageDots: false,\n            prevNextButtons: $thumbnails.length > 5 ? thumbnailsArrows : false,\n            asNavFor: $productGallery[0],\n          });\n\n          $thumbnailProductGallery.on('settle.flickity', () => {\n            $thumbnailProductGallery.flickity('resize');\n          });\n\n          $(window).on('load', () => {\n            $thumbnailProductGallery.flickity('resize');\n          });\n\n          // Once thumbnail is focused, move carousel to that cell\n          $.each($thumbnails, (index, thumbnail) => {\n            const $thumbnail = $(thumbnail);\n            if ($thumbnail.hasClass('is-selected')) {\n              $thumbnail.on('focus', () => {\n                $thumbnailProductGallery.flickity('selectCell', index);\n              });\n            }\n          });\n        }\n      } else {\n        // If not on desktop, create standard thumbnail slider\n        $thumbnailProductGallery.flickity({\n          cellAlign: 'center',\n          contain: true,\n          groupCells: '80%',\n          imagesLoaded: true,\n          pageDots: false,\n          prevNextButtons: $thumbnails.length > 5 ? thumbnailsArrows : false,\n          asNavFor: $productGallery[0],\n        });\n      }\n    } else if (thumbnailsEnabled === true) {\n      // If thumbnail slider is disabled, ensure thumbnails can still navigate product images\n      $thumbnailProductGallery.find('.gallery-cell').on('click', function () {\n        const index = $(this).index();\n        $productGallery.flickity('selectCell', index);\n      });\n    }\n\n    $(window).on('load', () => {\n      $productGallery.flickity().flickity('resize');\n    });\n\n    $productGallery.on('settle.flickity', () => {\n      $productGallery.flickity().flickity('resize');\n    });\n  },\n  loadProductRecommendations() {\n    const $productRecommendations = $('[data-product-recommendations]');\n    const $productRecommendationsSection = $('.shopify-section--recommended-products');\n    const sectionID = $productRecommendations.data('section-id');\n    const productID = $productRecommendations.data('product-id');\n    const limit = $productRecommendations.data('limit');\n    const recommendationsURL = $productRecommendations.data('recommendations-url');\n    const sectionEnabled = $productRecommendationsSection.find($productRecommendations).data('enabled');\n    const $recommendedProductSlider = $('.js-recommended-products-slider');\n\n    function loadDynamicProducts() {\n      // Build request URL\n      const requestUrl = `${recommendationsURL}?section_id=${sectionID}&limit=${limit}&product_id=${productID}`;\n\n      // Make ajax call to request information for window.Shopify's recommended products\n      $.ajax({\n        type: 'GET',\n        url: requestUrl,\n        success(data) {\n          if (!sectionEnabled) {\n            return;\n          }\n\n          const $recommendedProductsElement = $(data).find('.product-recommendations').html();\n\n          // Insert product list into the product recommendations container\n          $productRecommendations.html($recommendedProductsElement);\n\n          // Initialize product slider if it exists on page\n          if ($recommendedProductSlider.length) {\n            window.productPage.recommendedProductsSlider();\n          } else {\n            // Call enable gallery function for product galleries\n            $('[data-product-recommendations] [data-product-gallery]').each((_, gallery) => {\n              const $productGallery = $(gallery);\n              window.productPage.enableGallery($productGallery);\n            });\n          }\n\n          // Converting the currencies\n          if (window.PXUTheme.currency.show_multiple_currencies) {\n            window.currencyConverter.convertCurrencies();\n          }\n\n          // Run option selectors\n          window.productPage.runOptionSelector($productRecommendationsSection);\n\n          // Initialize shopify payment buttons\n          if (window.Shopify.PaymentButton) {\n            window.Shopify.PaymentButton.init();\n          }\n\n          // Hide <noscript> elements\n          window.hideNoScript();\n\n          // Initialize video players\n          window.videoFeature.setupRecommendedVideoPlayer();\n\n          // Initialize swatch toggler\n          $('.swatch_options label').on('click', function() {\n            window.quickShop.toggleSwatchImages($(this));\n          });\n\n          // Initialize the show secondary media on hover feature\n          if (window.PXUTheme.theme_settings.collection_secondary_image) {\n            window.imageFunctions.showSecondaryImage();\n          }\n        },\n      });\n    }\n\n    if (!sectionEnabled) { return; }\n\n    // If meta collection, no need to run API request\n    const metaCollection = $productRecommendations.hasClass('meta-related-recommended-collection');\n\n    if (metaCollection) {\n      // Takes care of moving content from Shopify section into block container\n\n      // Initialize product slider if it exists on page\n      if ($recommendedProductSlider.length) {\n        window.productPage.recommendedProductsSlider();\n      } else {\n        // Call enable gallery function for product galleries\n        $('.product-recommendations [data-product-gallery]').each(function () {\n          const $productGallery = $(this);\n          window.productPage.enableGallery($productGallery);\n        });\n      }\n\n      // Run option selectors\n      window.productPage.runOptionSelector($productRecommendationsSection);\n    } else {\n      loadDynamicProducts();\n    }\n  },\n  productSwatches() {\n    // Swatches linked with selected options\n    if (window.PXUTheme.theme_settings.product_form_style === 'radio') {\n      if ($('.js-product-section').length) {\n        const $productForms = $('.js-product-section').find('.product_form');\n\n        $productForms.addClass('is-visible');\n\n        // Loop through each product and set the initial option value state\n\n        $productForms.each((_, productForm) => {\n          const $productForm = $(productForm);\n          const JSONData = $productForm.data('product');\n          const productID = $productForm.data('product-id');\n          const productSection = `.product-${productID} .js-product-section`;\n          const swatchOptions = $productForm.find('.swatch_options .swatch');\n          if (swatchOptions.length > 1) {\n            window.Shopify.linkOptionSelectors(JSONData, productSection);\n          }\n        });\n      }\n\n      // Add click event when there is more than one product on the page (eg. Collection in Detail)\n      if ($('.js-product-section').length > 1) {\n        $('body').on('click', '.swatch-element', swatchElement => {\n          const $swatchElement = $(swatchElement.currentTarget);\n          const swatchValue = $swatchElement.data('value').toString();\n\n          $swatchElement\n            .siblings(`input[value=\"${swatchValue.replace(/\"/g, '\\\\\"')}\"]`)\n            .prop('checked', true)\n            .trigger('change');\n\n          const JSONData = $swatchElement.parents('.product_form').data('product');\n          const productID = $swatchElement.parents('.product_form').data('product-id');\n          const productSection = `.product-${productID} .js-product-section`;\n          const swatchOptions = $swatchElement.parents('.product_form').find('.swatch_options .swatch');\n\n          if (swatchOptions.length > 1) {\n            window.Shopify.linkOptionSelectors(JSONData, productSection);\n          }\n        });\n      }\n    }\n  },\n  recommendedProductsSlider() {\n    $('.product-recommendations .products-slider').each((_, productSlider) => {\n      const $productSlider = $(productSlider);\n      const productsPerSlide = $productSlider.data('products-per-slide');\n      const productsLimit = $productSlider.data('products-limit');\n      const productsAvailable = $productSlider.data('products-available');\n      let cellAlign;\n      let draggable;\n      let prevNext;\n      let wrapAround;\n      let initialIndex;\n\n      const lessSlidesThanProducts = productsAvailable > productsPerSlide;\n      const limitGreaterThanSlide = productsLimit > productsPerSlide;\n      const evenSlide = productsPerSlide % 2 === 0;\n\n      if (evenSlide && lessSlidesThanProducts && limitGreaterThanSlide) {\n        cellAlign = 'left';\n      } else {\n        cellAlign = 'center';\n      }\n\n      if (lessSlidesThanProducts && limitGreaterThanSlide) {\n        draggable = true;\n        prevNext = true;\n        wrapAround = true;\n      } else {\n        draggable = false;\n        prevNext = false;\n        wrapAround = false;\n      }\n\n      if (evenSlide && lessSlidesThanProducts && limitGreaterThanSlide) {\n        initialIndex = 0;\n      } else if (productsPerSlide === '3' && productsAvailable) {\n        initialIndex = 1;\n      } else if (productsPerSlide === '5' && productsAvailable) {\n        initialIndex = 2;\n      } else if (productsPerSlide === '7' && productsAvailable) {\n        initialIndex = 3;\n      }\n\n      if (window.PXUTheme.media_queries.medium.matches) {\n        cellAlign = 'center';\n        draggable = true;\n        prevNext = true;\n        wrapAround = true;\n        initialIndex = 1;\n\n        $productSlider.parents('.even-num-slides').removeClass('even-num-slides');\n      }\n\n      $productSlider.flickity({\n        lazyLoad: 2,\n        imagesLoaded: true,\n        draggable,\n        cellAlign,\n        prevNextButtons: prevNext,\n        wrapAround,\n        contain: true,\n        freeScroll: true,\n        initialIndex,\n      });\n    });\n  },\n  initializeQuantityBox() {\n    $('body').on('click', '.js-change-quantity', e => {\n      const $this = $(e.currentTarget);\n      const $input = $this.siblings('input');\n      const val = parseInt($input.val(), 10);\n      let valMax = 100000000000000000000000000000;\n      const valMin = $input.attr('min') || 0;\n      if ($input.attr('max') != null) {\n        valMax = $input.attr('max');\n      }\n      if (isNaN(val) || val < valMin) {\n        $input.val(valMin);\n      } if (val > valMax) {\n        $input.val(valMax);\n      }\n      if ($this.data('func') === 'plus') {\n        if (val < valMax) $input.val(val + 1);\n      } else {\n        if (val > valMin) $input.val(val - 1);\n        if ($this.parents('.cart_item').length) {\n          if (val - 1 === 0) {\n            $this.closest('.cart_item').addClass('animated fadeOutUp');\n          }\n        }\n      }\n      $input.trigger('change');\n    });\n  },\n  unload($target) {\n    const $slider = $target.find('.products-slider');\n    $slider.flickity('destroy');\n    $('body').off('click', '.js-change-quantity');\n  },\n};\n\n/*============================================================================\n  Header\n==============================================================================*/\n\nclass HeaderFader {\n  constructor() {\n    this.el = document.querySelector('[data-desktop-header]');\n    if (!this.el) return;\n    this.openers = new Set();\n    this.fadeClass = 'feature_image';\n    if (this.el.classList.contains('feature_image')) {\n      this.shouldFade = this.el.classList.contains('feature_image');\n    }\n  }\n\n  updateShouldFade(shouldFade) {\n    if (!this.el) return;\n\n    // No menus are open\n    if (!this.openers.size) {\n      this.shouldFade = shouldFade;\n      return;\n    }\n\n    // 1+ menus are open\n    if (shouldFade) {\n      this._fade();\n      this.shouldFade = shouldFade;\n    } else {\n      if (this.shouldFade) {\n        this.openers.clear();\n        this._clear();\n      }\n      this.shouldFade = shouldFade;\n    }\n  }\n\n  fade(requestor) {\n    if (!this.el) return;\n    if (!this.shouldFade) return;\n    if (this.openers.has(requestor)) return;\n    this.openers.add(requestor);\n    this._fade();\n  }\n\n  clear(requestor) {\n    if (!this.el) return;\n    if (!this.shouldFade) return;\n    this.openers.delete(requestor);\n    if (this.openers.size) return;\n    this._clear();\n  }\n\n  _fade() {\n    this.el.classList.remove(this.fadeClass);\n  }\n\n  _clear() {\n    this.el.classList.add(this.fadeClass);\n  }\n}\n\n/**\n * @class NavigationDesktopParent\n * @classdesc NavigationDesktopParent controls the functionality of tier 2 menus\n */\nclass NavigationDesktopParent {\n  constructor(options) {\n    this.menuItem = options.menuItem;\n    this.detailsItem = options.menuItem.querySelector('[data-nav-desktop-details]');\n    this.parentMenu = options.parentMenu;\n    this._locked = options.locked || (() => false);\n\n    this.menuLink = this.detailsItem.querySelector('[data-nav-desktop-link]');\n    this.submenuEl = this.menuItem.querySelector('[data-nav-desktop-submenu]');\n    this.isWideNav = 'navDesktopFullWidthMenu' in this.submenuEl.dataset;\n    this.openOnClick = this.menuItem.closest('[data-show-dropdown-on-click]');\n\n    this._isOpen = false;\n    this.submenu = null;\n\n    this.events = new window.EventHandler();\n\n    this._open = this._open.bind(this);\n    this._close = this._close.bind(this);\n    this.close = this.close.bind(this);\n\n    // When a user hits the escape key all of the menus should close and the keyboard focus should return\n    // to the parent link. This will bubble up to the top parent menu.\n    this.closeEsc = e => {\n      if (e.key === 'Escape') {\n        this.menuLink.focus();\n        this._close();\n      }\n    };\n\n    // When the mouse leaves the open menu, we don't want to close it right away. Setting a delay on close\n    // allows situations where you might go to another parent menu but your mouse would drag slightly outside\n    // of the open menu, causing you to have to go back and open the menu again. This improves accessibility\n    // as well as general usability.\n    this.closeTimer = null;\n    this.mouseover = () => {\n      clearTimeout(this.closeTimer);\n      this._open();\n    };\n\n    this.mouseout = () => {\n      this.closeTimer = setTimeout(this.close, 400);\n    };\n\n    this.click = e => {\n      e.stopPropagation();\n      // If the menu is already open, we want to continue to the link in the <a> tag.\n      // For mouse hover, this is pretty straightforward, but with keyboard and touch navigation\n      // you will have to touch or trigger that link a second time. This is maybe not the best for\n      // accessibility, but it's a good compromise for now.\n\n      const clickedParent = e.target.closest('[data-nav-desktop-link]');\n\n      if (clickedParent && 'href' in clickedParent.dataset) {\n        // We only prevent the click through if the menu wasn't already open.\n        e.preventDefault();\n\n        if (this._isOpen) {\n          window.location = clickedParent.dataset.href;\n          return;\n        }\n      }\n\n      // If the submenu isn't open, open it\n      this._open();\n    };\n\n    // During keyboard navigation, when you focus onto the parent menuItem, this will close the other\n    // menu items that were previously open. This usually happens when you were navigating within\n    // a submenu and then tab out of it to the next menu item at a lower tier.\n    this.focusin = e => {\n      e.stopPropagation();\n      this.parentMenu.closeSiblings(this);\n    };\n\n    // Set up animation event\n    this.animation = window.animations.transition({ el: this.submenuEl, state: 'closed' });\n\n    if (!this.openOnClick) {\n      this.events.register(this.menuItem, 'mouseover', () => this.mouseover());\n      this.events.register(this.menuItem, 'mouseout', () => this.mouseout());\n    }\n\n    this.events.register(this.menuItem, 'click', e => this.click(e));\n    this.events.register(this.menuItem, 'touchend', e => this.click(e));\n    this.events.register(this.menuItem, 'focusin', e => this.focusin(e));\n\n    // If the user clicks, taps, or their keyboard focus reaches outside of the menu\n    // we should close this menu.\n    this.events.register(document.body, 'click', () => this._close());\n    this.events.register(document.body, 'focusin', () => this._close());\n  }\n\n  /**\n   * Close the dropdown menu immediately\n   *\n   */\n  forceClose() {\n    this._close();\n  }\n\n  /**\n   * Close the dropdown menu\n   *\n   */\n  close() {\n    this._close();\n  }\n\n  /**\n   * Open the dropdown menu immediately\n   */\n  forceOpen() {\n    this._open(true);\n  }\n\n  /**\n   * Open the dropdown menu\n   */\n  open() {\n    this._open();\n  }\n\n  /**\n   * Check to see if dropdown is offscreen and apply a class so it can be styled differently.\n   */\n  _setAlternateDrop() {\n    if (this.isWideNav) return;\n\n    const menuBounds = this.submenuEl.getBoundingClientRect();\n    if (menuBounds.right > document.documentElement.clientWidth) {\n      this.submenuEl.classList.add('alternate-drop');\n    }\n    if (menuBounds.left < 0) {\n      this.submenuEl.classList.add('alternate-drop-left');\n    }\n  }\n\n  /**\n   * Remove any class applied to prevent offscreen menus\n   */\n  _removeAlternateDrop() {\n    this.submenuEl.classList.remove('alternate-drop');\n  }\n\n  /**\n   * Opens the dropdown menu\n   *\n   * @private\n   */\n  _open(force = false) {\n    if (this._isOpen || this._locked()) return;\n\n    this._isOpen = true;\n    this.parentMenu.closeSiblings(this);\n\n    this.closeEscEvent = this.events.register(window, 'keyup', e => this.closeEsc(e));\n\n    if (!this.submenu) {\n      this.submenu = new NavigationDesktopMenu({ navList: this.submenuEl });\n    }\n\n    this._removeAlternateDrop();\n\n    if (this.isWideNav) {\n      window.headerFader.fade(this);\n    }\n\n    this.detailsItem.setAttribute('open', 'open');\n\n    this.animation.animateTo('open', {\n      onStart: ({ el }) => {\n        this._setAlternateDrop();\n      },\n      force,\n    }).then(state => {\n      if (state == 'open') {\n        this.menuLink.setAttribute('aria-expanded', true);\n      }\n    });\n  }\n\n  /**\n   * Closes the dropdown menu\n   *\n   * @private\n   */\n  _close() {\n    if (!this._isOpen || this._locked()) return;\n\n    if (this.submenu) {\n      this.submenu.unload();\n      this.submenu = null;\n    }\n\n    this._isOpen = false;\n\n    this.events.unregister(this.closeEscEvent);\n\n    if (this.isWideNav) {\n      window.headerFader.clear(this);\n    }\n\n    this.animation.animateTo('closed')\n      .then(state => {\n        if (state == 'closed') {\n          this._removeAlternateDrop();\n          this.menuLink.setAttribute('aria-expanded', false);\n          this.detailsItem.removeAttribute('open');\n        }\n      });\n  }\n\n  /**\n   * Unbinds all events\n   *\n   */\n  unload() {\n    this.forceClose();\n    this.events.unregisterAll();\n\n    if (this.closeEscEvent) {\n      this.events.unregister(this.closeEscEvent);\n    }\n  }\n}\n\n/**\n * @class NavigationDesktopMenu\n * @classdesc NavigationDesktopMenu controls the overall menu functionality and initializes Tier 2 menus\n */\nclass NavigationDesktopMenu {\n  constructor(options) {\n    this.navList = options.navList;\n    this.menuItems = this.navList.children;\n\n    // NavigationDesktopParent for meganav, if any, that is selected for editing in the TE.\n    this._selectedBlock = null;\n\n    this.parents = [];\n\n    this.events = new window.EventHandler();\n\n    for (let i = 0; i < this.menuItems.length; i++) {\n      const menuItem = this.menuItems[i];\n      if ('navDesktopParent' in menuItem.dataset) {\n        this.parents.push(\n          new NavigationDesktopParent({\n            menuItem,\n            parentMenu: this,\n            locked: () => this._selectedBlock !== null,\n          }),\n        );\n      } else {\n        // If the keyboard navigation moves to another menuItem, we should close any\n        // other existing menus that are open.\n        this.events.register(menuItem, 'focusin', () => this.closeAllMenus());\n      }\n    }\n  }\n\n  onMeganavSelect(block) {\n    const meganavParent = this.parents.find(parent => parent.menuItem === block);\n\n    if (!meganavParent) return;\n\n    meganavParent.forceOpen();\n    this._selectedBlock = meganavParent;\n  }\n\n  onMeganavDeselect() {\n    this._selectedBlock = null;\n    this.closeAllMenus();\n  }\n\n  /**\n   * This function will close all menus that are not the current menu.\n   * This is mostly used by the HeaderNavParent class.\n   *\n   * @param { Object } current - The current menuItem\n   */\n  closeSiblings(current) {\n    this.parents.forEach(parent => {\n      if (parent !== current) {\n        parent.close();\n      }\n    });\n  }\n\n  /**\n   * This function will close all menus\n   *\n   */\n  closeAllMenus() {\n    this.parents.forEach(parent => parent.close());\n  }\n\n  /**\n   * Unbinds all events\n   *\n   */\n  unload() {\n    this.closeAllMenus();\n    this.parents.forEach(parent => { parent.unload(); });\n    this.events.unregisterAll();\n  }\n}\n\n\n/**\n * @class NavigationDesktop\n * @classdesc Header navigation component is used to display menus on the header and set up their functionality\n *\n */\nclass NavigationDesktop {\n  constructor(el) {\n    this.navTier1 = el.querySelector('[data-nav-desktop-tier-1]');\n\n    if (this.navTier1) {\n      this.headerNavMenu = new NavigationDesktopMenu({\n        navList: this.navTier1,\n      });\n    }\n  }\n\n  onMeganavSelect(block) {\n    if (!this.headerNavMenu) return;\n\n    this.headerNavMenu.onMeganavSelect(block);\n  }\n\n  onMeganavDeselect() {\n    if (!this.headerNavMenu) return;\n\n    this.headerNavMenu.onMeganavDeselect();\n  }\n\n  unload() {\n    if (!this.headerNavMenu) return;\n\n    this.headerNavMenu.unload();\n  }\n}\n\nclass NavigationDesktopManager {\n  constructor() {\n    this.desktopNavs = [];\n  }\n\n  onMeganavSelect(block) {\n    this.desktopNavs.forEach(nav => nav.onMeganavSelect(block));\n  }\n\n  onMeganavDeselect() {\n    this.desktopNavs.forEach(nav => nav.onMeganavDeselect());\n  }\n\n  initAll() {\n    this.unload();\n\n    this.desktopNavs = Array.prototype.map\n      .call(document.querySelectorAll('[data-nav-desktop]'), navEl => new NavigationDesktop(navEl));\n  }\n\n  unload() {\n    this.desktopNavs.forEach(nav => nav.unload());\n  }\n}\n\nwindow.navigationDesktopManager = new NavigationDesktopManager();\n\nclass MobileMenuDrawer {\n  constructor(el) {\n    this.el = el;\n\n    if (!this.el) return;\n\n    this.trigger = this.el.querySelector('[data-mobile-menu-trigger]');\n    this.icon = this.el.querySelector('[data-mobile-menu-icon]');\n\n    this.animation = window.animations.transition({\n      el: this.el.querySelector(['[data-nav]']),\n      state: 'closed',\n    });\n\n    this.events = new window.EventHandler();\n\n    this.events.register(this.trigger, 'click', e => {\n      e.preventDefault();\n      this._toggle()\n    });\n  }\n\n  _toggle() {\n    if (this.animation.state === 'open') {\n      this.close();\n      return;\n    }\n\n    this.open();\n  }\n\n  open() {\n    if (!this.el) return;\n    if (this.animation.state === 'open') return;\n\n    this.el.open = true;\n    this.icon.classList.add('open');\n    document.body.classList.add('is-active');\n    this.animation.animateTo('open')\n  }\n\n  close() {\n    if (!this.el) return;\n    if (this.animation.state === 'closed') return;\n\n    this.icon.classList.remove('open');\n    this.animation.animateTo('closed')\n      .then(state => {\n        if (state === 'closed') {\n          this.el.open = false;\n          document.body.classList.remove('is-active');\n        }\n      });\n  }\n\n  unload() {\n    if (this.events) {\n      this.events.unregisterAll();\n    }\n  }\n}\n\nwindow.header = {\n  init() {\n    this.events = new EventHandler();\n    this.headerSearch = document.querySelector('[data-dropdown-rel=\"search\"]');\n\n    window.headerFader = new HeaderFader();\n    window.navigationDesktopManager.initAll();\n    window.mobileMenuDrawer = new MobileMenuDrawer(document.querySelector('[data-mobile-menu]'));\n\n    this.events.register(this.headerSearch, 'click', e => {\n      if (window.PXUTheme.media_queries.medium.matches) {\n        e.preventDefault();\n        window.mobileSearch.open();\n      }\n    });\n\n    var closeMiniCart = function() {\n      // Handle cart notes before closing\n      document.querySelectorAll('[data-cart-form=\"mini-cart\"] [data-cart-note]').forEach(el => {\n        el.addEventListener('change', event => {\n          const body = JSON.stringify({ note: event.target.value });\n          const options = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json', Accept: 'application/json' },\n          };\n          fetch(`${window.PXUTheme.routes.cart_update_url}`, { ...options, ...{ body } });\n        });\n      });\n\n      $('body').removeClass('is-active').removeClass('blocked-scroll');\n      $('.dropdown_link').toggleClass('active_link');\n      $('.cart-container').removeClass('active_link');\n    };\n\n    var openMiniCart = function($cart_container) {\n      window.mobileMenuDrawer.close();\n      $('.dropdown_link').removeClass('active_link');\n      $cart_container.addClass('active_link');\n    };\n\n    if ($('.promo-banner').length) {\n      const promoBanner = window.Cookies.get('promo-banner');\n\n      if (promoBanner !== 'dismiss') {\n        $('body').addClass('promo-banner--show');\n        $('.promo-banner').on('click', '.promo-banner__close', () => {\n          $('body').removeClass('promo-banner--show');\n          window.Cookies.set('promo-banner', 'dismiss', {\n            expires: 30, path: '', domain: '', sameSite: 'None', secure: true,\n          });\n        });\n      }\n    }\n\n    // Click anywhere outside of dropdown to close\n    $('html').on('click', event => {\n      if (!$(event.target).closest('.cart-container').length && $('.cart_content').is(':visible')) {\n        closeMiniCart();\n      }\n    });\n\n    // Close the mini cart when the mobile menu is clicked\n    $('.mobile_nav').on('click', event => {\n      if (!$(event.target).closest('.cart-container').length && $('.cart_content').is(':visible')) {\n        closeMiniCart();\n      }\n    });\n\n    function throttle(fn, delay) {\n      let lastTime = 0;\n      return function (...args) {\n        let now = Date.now();\n        if (now - lastTime >= delay) {\n          fn.apply(this, args);\n          lastTime = now;\n        }\n      };\n    }\n\n    class MobileStickyHeader {\n      constructor() {\n        this.headerHeight = 0;\n        this.triggerY = 0;\n        this.observer = null;\n        this.scrollTimeout = null;\n\n        this.$headerGroup = $('.header-group');\n        this.$mainHeader = $('.shopify-section--header');\n        this.$observerTargets = $('.header-group > div:not(.shopify-section--mega-menu)');\n        this.$header = $('#header');\n        this.$promoBanner = $('#header .promo-banner');\n        this.$topBar = $('#header .top-bar');\n        this.$sectionWrapper = $('.section-wrapper');\n\n        this.promoBannerHeightCache = this.$promoBanner.height();\n\n        this.init();\n      }\n\n      init() {\n        this.updateHeaderHeight();\n        this.updateTriggerY();\n        window.addEventListener('scroll', this.toggleSticky);\n        this.initResizeObserver();\n      }\n\n      initResizeObserver() {\n        try {\n          this.observer = new ResizeObserver((entries) => {\n            const isMainBar = entries.some((entry) => entry.target == this.$mainHeader[0]);\n\n            if (isMainBar) {\n              // When promo bar is dismissed\n              if (this.$promoBanner.length > 0 && this.$promoBanner.height() != this.promoBannerHeightCache) {\n                this.promoChange();\n              }\n              // When mobile menu is opened and sticky class has not been added\n              if ($('body.is-active .header-group:not(.sticky)').length > 0) {\n                this.$headerGroup.css('padding-bottom', this.headerHeight);\n                this.$header.css('top', Math.max(this.triggerY - window.scrollY, 0));\n              } else {\n                this.$headerGroup.css('padding-bottom', 0);\n                this.$header.css('top', 0);\n              }\n                \n            } else {\n              this.updateHeaderHeight();\n              this.updateTriggerY();\n              window.removeEventListener('scroll', this.toggleSticky);\n              window.addEventListener('scroll', this.toggleSticky);\n            }\n          });\n\n          this.$observerTargets.each((i, target) => {\n            try {\n              this.observer.observe(target);\n            } catch (error) {\n              console.error(`Failed to observe target ${i}:`, error);\n            }\n          });\n        } catch (error) {\n          console.error('Failed to initialize ResizeObserver:', error);\n        }\n      }\n\n      updateHeaderHeight() {\n        // excludes any height added by the opened menu (main bar only)\n        this.headerHeight = (this.$promoBanner.height() ?? 0) + this.$topBar.height();\n      }\n\n      updateTriggerY() {\n        this.triggerY = this.$sectionWrapper[0].getBoundingClientRect().top + window.scrollY - this.headerHeight;\n      }\n\n      promoChange() {\n        this.promoBannerHeightCache = this.$promoBanner.height();\n        this.updateHeaderHeight();\n        this.updateTriggerY();\n      }\n\n      toggleSticky = throttle(() => {\n        const toggle = () => {\n          if (window.scrollY >= this.triggerY) {\n            const stickyHeaderHeight = getComputedStyle(document.body).getPropertyValue('--sticky-header-height');\n            if (!stickyHeaderHeight) {\n              document.body.style.setProperty('--sticky-header-height', `${this.headerHeight}px`);\n            }\n            this.$headerGroup.addClass('sticky');\n          } else {\n            document.body.style.removeProperty('--sticky-header-height');\n            this.$headerGroup.removeClass('sticky');\n          }\n        }\n        toggle();\n\n        // Ensures fire on finish scrolling\n        clearTimeout(this.scrollTimeout);\n        this.scrollTimeout = setTimeout(toggle, 200);\n      }, 100);\n    }\n\n    //Only apply on larger screen sizes\n    if (window.PXUTheme.media_queries.large.matches) {\n      if ($('.header').hasClass('header-fixed--true')){\n\n        //offset scroll position\n        $('body').on('click', '.banner a[href^=\"#\"]', function(e) {\n            e.preventDefault();\n            var anchorLink = $(this).attr('href');\n            var headerHeight = $('.main-nav__wrapper.sticky_nav').outerHeight();\n            $('html, body').animate({\n              scrollTop: $(anchorLink).offset().top - headerHeight\n            }, 2000);\n        });\n\n        if (!$('.main-nav__wrapper').hasClass('sticky_nav')) {\n          let stickyNavAnimation;\n          window.sticky_nav = new Headhesive('.main-nav__wrapper', {\n            offset: 700,\n            throttle: 300,\n            classes: {\n              clone: 'sticky_nav',\n              stick: 'sticky_nav--stick',\n              unstick: 'sticky_nav--unstick'\n            },\n            onInit: function() {\n              $('.sticky_nav .secondary_logo').css('display', 'none');\n              $('.sticky_nav .primary_logo').css('display', 'block');\n              $('.sticky_nav .icon-search').css('display', 'block');\n              $('.sticky_nav .search-form').css('display', 'none');\n              $('.sticky_nav .search-link').css('display', 'block');\n              $('.sticky_nav .main-nav').append($(\".header .cart-container\").clone());\n              window.navigationDesktopManager.initAll();\n              stickyNavAnimation = new window.animations\n                .transition({ el: document.querySelector('.sticky_nav'), state: 'closed' });\n            },\n            onStick: function() {\n              stickyNavAnimation.animateTo('open', {\n                onStart: () => {\n                  var maxHeight = 0;\n                  var $targetHeightElement = $('.sticky_nav .main-nav');\n\n                  $targetHeightElement.each(function() {\n                    maxHeight = maxHeight > $(this).outerHeight() ? maxHeight : $(this).outerHeight();\n                  });\n\n                  $('.sticky_nav .mini_cart').css('height', maxHeight);\n                  $('.sticky_nav .cart_content').css('top', maxHeight);\n                  document.querySelector('.sticky_nav').style.setProperty('--sticky-header-height', `${maxHeight}px`);\n                },\n              });\n            },\n            onUnstick: function() {\n              $('.cart-container').removeClass('active_link');\n              stickyNavAnimation.animateTo('closed', { force: true });\n            },\n            onDestroy: () => {\n              if (stickyNavAnimation) {\n                stickyNavAnimation.unload();\n              }\n            }\n          });\n        }\n      } else {\n        $('.header-fixed--true').removeClass('header-fixed--true');\n        if ($('.main-nav__wrapper').length > 1) {\n          $('.main-nav__wrapper').first().remove();\n        }\n      }\n\n      if ($('img.primary_logo:visible')){\n        $('.logo img', $(\".feature_image .header\")).attr('src', $('.logo img').data('src-home'));\n      } else {\n        $('.logo img').attr('src', $('.logo img').data('src'));\n      }\n    //Mobile menu\n    } else {\n      if ($('#header').hasClass('mobile_nav-fixed--true')) {\n        $('body').addClass('mobile_nav-fixed--true');\n        $('body').removeClass('mobile_nav-fixed--false');\n\n        new MobileStickyHeader();        \n\n        //offset scroll position\n        $('body').on('click', '.banner a[href^=\"#\"]', function(e) {\n            e.preventDefault();\n            var anchorLink = $(this).attr('href');\n            var headerHeight = $('#header').outerHeight();\n            $('html, body').animate({\n              scrollTop: $(anchorLink).offset().top - headerHeight\n            }, 2000);\n        });\n      } else {\n        $('body').removeClass('mobile_nav-fixed--true');\n        $('body').addClass('mobile_nav-fixed--false');\n      }\n    }\n\n    // Avoid cart_content duplicating for mobile screen sizes\n    if ($('#header .cart_content').length < 1) {\n      $('#header .cart-container').append($('.header .cart_content').clone());\n    }\n\n    let closeTimer = null;\n\n    // Toggle mini-cart with menu icon\n    if (window.PXUTheme.theme_settings.cart_action !== 'redirect_cart') {\n      $('.mini_cart').on('click ', function () {\n        const $cartContainer = $(this).parent();\n        if ($cartContainer.hasClass('active_link')) {\n          closeMiniCart();\n        } else {\n          openMiniCart($cartContainer);\n        }\n      });\n\n      $('.cart-container').on('mouseenter', function () {\n        const $cartContainer = $(this);\n        clearTimeout(closeTimer);\n        openMiniCart($cartContainer);\n      });\n\n      $('.cart-container').on('mouseleave', () => {\n        closeTimer = setTimeout(() => closeMiniCart(), 400);\n      });\n    }\n\n    $('.cart_content__continue-shopping').on('click', () => {\n      closeMiniCart();\n    });\n  },\n  unload() {\n    if (window.sticky_nav) {\n      window.sticky_nav.destroy();\n    }\n    window.navigationDesktopManager.unload();\n    window.mobileMenuDrawer.unload();\n    $('body').off('click', '.mobile_nav');\n    $('html').off('click');\n    $('.cart-container').off('mouseenter');\n    $('.cart-container').off('mouseleave');\n    $('.mini_cart').off('click');\n    $('.cart_content__continue-shopping').off('click');\n    $('body').off('click', '.banner a[href^=\"#\"]');\n    $('.main-nav__wrapper.sticky_nav').remove();\n  }\n}\n\nclass Meganav {\n  constructor(el, options = {}) {\n    this.options = {\n      getTargets: () => [],\n      afterChange: () => {},\n      ...options,\n    };\n\n    this.content = el;\n    this.targetHandle = this.content.dataset.meganavHandle;\n    this.targets = this.options.getTargets({ handle: this.targetHandle });\n    this.newMenuItems = [];\n\n    if (!this.targets.length) return;\n\n    this.refTarget = this.targets[0];\n    this.title = this.refTarget.querySelector('[data-nav-title]').innerHTML;\n    this.url = this._getUrl(this.refTarget);\n\n    this.nav = this.refTarget.closest('[data-nav]');\n    this.menuItemTemplate = this.nav.querySelector('[data-nav-parent-template]');\n    this.inject();\n  }\n\n  inject() {\n    if (!this.targets.length) return;\n\n    this._removeInjectedContent();\n\n    const newMenuItem = this.menuItemTemplate.content.firstElementChild.cloneNode(true);\n\n    newMenuItem.querySelector('[data-meganav-target-container]').appendChild(this.content.cloneNode(true));\n    newMenuItem.querySelector('[data-nav-title]').innerHTML = this.title;\n    this._updateHref(newMenuItem, this.url);\n\n    this.newMenuItems = Array.prototype.map.call(this.targets, target => {\n      const newItem = newMenuItem.cloneNode(true);\n      target.replaceWith(newItem);\n      return newItem;\n    });\n    this.options.afterChange();\n  }\n\n  unload() {\n    this._removeInjectedContent();\n    this.options.afterChange();\n  }\n\n  _updateHref(target, url) {\n    const dataHrefEl = target.querySelector('[data-href]');\n\n    if (dataHrefEl) {\n      dataHrefEl.dataset.href = url;\n      return;\n    }\n\n    const a = target.querySelector('a');\n\n    if (a) {\n      a.href = url;\n      return;\n    }\n  }\n\n  _getUrl(target) {\n    const dataHrefEl = target.querySelector('[data-href]');\n\n    if (dataHrefEl) {\n      return dataHrefEl.dataset.href;\n    }\n\n    const a = target.querySelector('a');\n\n    // If there's a `href=\"#\"`, `a.href` will return the resolved URL, which includes the page URL\n    // and the `#` fragment, so we'll use `getAttribute()` here.\n    // This is used for handling the click events on the mobile menu accordions.\n    if (a) {\n      return a.getAttribute('href');\n    }\n\n    return '';\n  }\n\n  _removeInjectedContent() {\n    this.newMenuItems.forEach((menuItem, i) => {\n      menuItem.replaceWith(this.targets[i]);\n    });\n\n    this.newMenuItems = [];\n  }\n}\n\nclass MeganavManager {\n  constructor() {\n    this.meganavs = new Map();\n  }\n\n  select(el) {\n    if (!this.meganavs.get(el)) return;\n    const { desktop } = this.meganavs.get(el);\n    desktop.newMenuItems.forEach(menuItem => {\n      window.navigationDesktopManager.onMeganavSelect(menuItem);\n    })\n  }\n\n  deselect() {\n    window.navigationDesktopManager.onMeganavDeselect();\n  }\n\n  add(el) {\n    if (!el.querySelector('[data-meganav-mobile]') || !el.querySelector('[data-meganav-desktop]')) return;\n    this.meganavs.set(el,\n      {\n        mobile: new Meganav(\n          el.querySelector('[data-meganav-mobile]'),\n          {\n            getTargets: ({ handle }) => document.querySelectorAll(`[data-meganav-mobile-target=\"${handle}\"]`),\n          }\n        ),\n        desktop: new Meganav(\n          el.querySelector('[data-meganav-desktop]'),\n          {\n            getTargets: ({ handle }) => document.querySelectorAll(`[data-meganav-desktop-target=\"${handle}\"]`),\n            afterChange: () => window.navigationDesktopManager.initAll(),\n          }\n        ),\n    });\n  }\n\n  remove(el) {\n    const meganav = this.meganavs.get(el);\n    if (meganav) {\n      meganav.mobile.unload();\n      meganav.desktop.unload();\n      this.meganavs.delete(el);\n    }\n  }\n\n  injectAll() {\n    this.unload();\n\n    this._addAll();\n\n    for (const [el, meganav] of this.meganavs) {\n      meganav.mobile.inject();\n      meganav.desktop.inject();\n    }\n  }\n\n  unload() {\n    for (const [el, meganav] of this.meganavs) {\n      meganav.mobile.unload();\n      meganav.desktop.unload();\n    }\n    this.meganavs.clear();\n  }\n\n  _addAll() {\n    document\n      .querySelectorAll('.shopify-section--mega-menu')\n      .forEach(meganavEl => {\n        if (this.meganavs.has(meganavEl)) return;\n\n        this.add(meganavEl);\n      });\n  }\n}\n\nwindow.meganavManager = new MeganavManager();\n\n/*============================================================================\n  Map\n==============================================================================*/\nwindow.map = {\n  init() {\n    if ($('.lazymap').length > 0) {\n      lazyframe('.lazymap');\n    }\n\n    if ($('.maps').hasClass('js-api-map')) {\n      const mapsToLoad = [];\n      // Create map settings array\n      $('.map').each(function (i) {\n        mapsToLoad.push(this);\n        mapsToLoad[i].sectionid = $(this).data('id');\n        mapsToLoad[i].address = $(this).data('address');\n        mapsToLoad[i].directions = $(this).data('directions-address');\n        mapsToLoad[i].zoom = $(this).data('zoom');\n        mapsToLoad[i].mapstyle = $(this).data('style');\n        mapsToLoad[i].showpin = $(this).data('pin');\n        mapsToLoad[i].apikey = $(this).data('api-key');\n      });\n      $.each(mapsToLoad, i => {\n        // Enable caching to avoid duplicate google maps files\n        $.ajaxSetup({ cache: true });\n        // Load maps script and find location coordinates\n        $.getScript(\n          `https://maps.googleapis.com/maps/api/js?key=${mapsToLoad[i].apikey}`,\n        ).then(() => {\n          window.map.findLocation(mapsToLoad[i]);\n          $.ajaxSetup({ cache: false });\n        });\n      });\n    }\n  },\n  findLocation(mapArray) {\n    let geoLat;\n    let geoLng;\n    const geocoder = new google.maps.Geocoder();\n    // Find and set coordinates\n    geocoder.geocode({ address: mapArray.dataset.address }, (results, status) => {\n      if (status === google.maps.GeocoderStatus.OK) {\n        geoLat = results[0].geometry.location.lat();\n        geoLng = results[0].geometry.location.lng();\n        // Create map\n        window.map.initMap(geoLat, geoLng, mapArray);\n      } else {\n        console.log(`Error:${status}`);\n      }\n    });\n  },\n  initMap(lat, lng, mapArray) {\n    const location = { lat, lng };\n    let styleJson = [];\n    // Set style JSON\n    if (mapArray.mapstyle === 'aubergine') {\n      styleJson = [{ elementType: 'geometry', stylers: [{ color: '#1d2c4d' }] }, { elementType: 'labels.text.fill', stylers: [{ color: '#8ec3b9' }] }, { elementType: 'labels.text.stroke', stylers: [{ color: '#1a3646' }] }, { featureType: 'administrative.country', elementType: 'geometry.stroke', stylers: [{ color: '#4b6878' }] }, { featureType: 'administrative.land_parcel', elementType: 'labels.text.fill', stylers: [{ color: '#64779e' }] }, { featureType: 'administrative.province', elementType: 'geometry.stroke', stylers: [{ color: '#4b6878' }] }, { featureType: 'landscape.man_made', elementType: 'geometry.stroke', stylers: [{ color: '#334e87' }] }, { featureType: 'landscape.natural', elementType: 'geometry', stylers: [{ color: '#023e58' }] }, { featureType: 'poi', elementType: 'geometry', stylers: [{ color: '#283d6a' }] }, { featureType: 'poi', elementType: 'labels.text.fill', stylers: [{ color: '#6f9ba5' }] }, { featureType: 'poi', elementType: 'labels.text.stroke', stylers: [{ color: '#1d2c4d' }] }, { featureType: 'poi.park', elementType: 'geometry.fill', stylers: [{ color: '#023e58' }] }, { featureType: 'poi.park', elementType: 'labels.text.fill', stylers: [{ color: '#3C7680' }] }, { featureType: 'road', elementType: 'geometry', stylers: [{ color: '#304a7d' }] }, { featureType: 'road', elementType: 'labels.text.fill', stylers: [{ color: '#98a5be' }] }, { featureType: 'road', elementType: 'labels.text.stroke', stylers: [{ color: '#1d2c4d' }] }, { featureType: 'road.highway', elementType: 'geometry', stylers: [{ color: '#2c6675' }] }, { featureType: 'road.highway', elementType: 'geometry.stroke', stylers: [{ color: '#255763' }] }, { featureType: 'road.highway', elementType: 'labels.text.fill', stylers: [{ color: '#b0d5ce' }] }, { featureType: 'road.highway', elementType: 'labels.text.stroke', stylers: [{ color: '#023e58' }] }, { featureType: 'transit', elementType: 'labels.text.fill', stylers: [{ color: '#98a5be' }] }, { featureType: 'transit', elementType: 'labels.text.stroke', stylers: [{ color: '#1d2c4d' }] }, { featureType: 'transit.line', elementType: 'geometry.fill', stylers: [{ color: '#283d6a' }] }, { featureType: 'transit.station', elementType: 'geometry', stylers: [{ color: '#3a4762' }] }, { featureType: 'water', elementType: 'geometry', stylers: [{ color: '#0e1626' }] }, { featureType: 'water', elementType: 'labels.text.fill', stylers: [{ color: '#4e6d70' }] }];\n    } else if (mapArray.mapstyle === 'retro') {\n      styleJson = [{ elementType: 'geometry', stylers: [{ color: '#ebe3cd' }] }, { elementType: 'labels.text.fill', stylers: [{ color: '#523735' }] }, { elementType: 'labels.text.stroke', stylers: [{ color: '#f5f1e6' }] }, { featureType: 'administrative', elementType: 'geometry.stroke', stylers: [{ color: '#c9b2a6' }] }, { featureType: 'administrative.land_parcel', elementType: 'geometry.stroke', stylers: [{ color: '#dcd2be' }] }, { featureType: 'administrative.land_parcel', elementType: 'labels.text.fill', stylers: [{ color: '#ae9e90' }] }, { featureType: 'landscape.natural', elementType: 'geometry', stylers: [{ color: '#dfd2ae' }] }, { featureType: 'poi', elementType: 'geometry', stylers: [{ color: '#dfd2ae' }] }, { featureType: 'poi', elementType: 'labels.text.fill', stylers: [{ color: '#93817c' }] }, { featureType: 'poi.park', elementType: 'geometry.fill', stylers: [{ color: '#a5b076' }] }, { featureType: 'poi.park', elementType: 'labels.text.fill', stylers: [{ color: '#447530' }] }, { featureType: 'road', elementType: 'geometry', stylers: [{ color: '#f5f1e6' }] }, { featureType: 'road.arterial', elementType: 'geometry', stylers: [{ color: '#fdfcf8' }] }, { featureType: 'road.highway', elementType: 'geometry', stylers: [{ color: '#f8c967' }] }, { featureType: 'road.highway', elementType: 'geometry.stroke', stylers: [{ color: '#e9bc62' }] }, { featureType: 'road.highway.controlled_access', elementType: 'geometry', stylers: [{ color: '#e98d58' }] }, { featureType: 'road.highway.controlled_access', elementType: 'geometry.stroke', stylers: [{ color: '#db8555' }] }, { featureType: 'road.local', elementType: 'labels.text.fill', stylers: [{ color: '#806b63' }] }, { featureType: 'transit.line', elementType: 'geometry', stylers: [{ color: '#dfd2ae' }] }, { featureType: 'transit.line', elementType: 'labels.text.fill', stylers: [{ color: '#8f7d77' }] }, { featureType: 'transit.line', elementType: 'labels.text.stroke', stylers: [{ color: '#ebe3cd' }] }, { featureType: 'transit.station', elementType: 'geometry', stylers: [{ color: '#dfd2ae' }] }, { featureType: 'water', elementType: 'geometry.fill', stylers: [{ color: '#b9d3c2' }] }, { featureType: 'water', elementType: 'labels.text.fill', stylers: [{ color: '#92998d' }] }];\n    } else if (mapArray.mapstyle === 'silver') {\n      styleJson = [{ elementType: 'geometry', stylers: [{ color: '#f5f5f5' }] }, { elementType: 'labels.icon', stylers: [{ visibility: 'off' }] }, { elementType: 'labels.text.fill', stylers: [{ color: '#616161' }] }, { elementType: 'labels.text.stroke', stylers: [{ color: '#f5f5f5' }] }, { featureType: 'administrative.land_parcel', elementType: 'labels.text.fill', stylers: [{ color: '#bdbdbd' }] }, { featureType: 'poi', elementType: 'geometry', stylers: [{ color: '#eeeeee' }] }, { featureType: 'poi', elementType: 'labels.text.fill', stylers: [{ color: '#757575' }] }, { featureType: 'poi.park', elementType: 'geometry', stylers: [{ color: '#e5e5e5' }] }, { featureType: 'poi.park', elementType: 'labels.text.fill', stylers: [{ color: '#9e9e9e' }] }, { featureType: 'road', elementType: 'geometry', stylers: [{ color: '#ffffff' }] }, { featureType: 'road.arterial', elementType: 'labels.text.fill', stylers: [{ color: '#757575' }] }, { featureType: 'road.highway', elementType: 'geometry', stylers: [{ color: '#dadada' }] }, { featureType: 'road.highway', elementType: 'labels.text.fill', stylers: [{ color: '#616161' }] }, { featureType: 'road.local', elementType: 'labels.text.fill', stylers: [{ color: '#9e9e9e' }] }, { featureType: 'transit.line', elementType: 'geometry', stylers: [{ color: '#e5e5e5' }] }, { featureType: 'transit.station', elementType: 'geometry', stylers: [{ color: '#eeeeee' }] }, { featureType: 'water', elementType: 'geometry', stylers: [{ color: '#c9c9c9' }] }, { featureType: 'water', elementType: 'labels.text.fill', stylers: [{ color: '#9e9e9e' }] }];\n    } else if (mapArray.mapstyle === 'night') {\n      styleJson = [{ elementType: 'geometry', stylers: [{ color: '#242f3e' }] }, { elementType: 'labels.text.fill', stylers: [{ color: '#746855' }] }, { elementType: 'labels.text.stroke', stylers: [{ color: '#242f3e' }] }, { featureType: 'administrative.locality', elementType: 'labels.text.fill', stylers: [{ color: '#d59563' }] }, { featureType: 'poi', elementType: 'labels.text.fill', stylers: [{ color: '#d59563' }] }, { featureType: 'poi.park', elementType: 'geometry', stylers: [{ color: '#263c3f' }] }, { featureType: 'poi.park', elementType: 'labels.text.fill', stylers: [{ color: '#6b9a76' }] }, { featureType: 'road', elementType: 'geometry', stylers: [{ color: '#38414e' }] }, { featureType: 'road', elementType: 'geometry.stroke', stylers: [{ color: '#212a37' }] }, { featureType: 'road', elementType: 'labels.text.fill', stylers: [{ color: '#9ca5b3' }] }, { featureType: 'road.highway', elementType: 'geometry', stylers: [{ color: '#746855' }] }, { featureType: 'road.highway', elementType: 'geometry.stroke', stylers: [{ color: '#1f2835' }] }, { featureType: 'road.highway', elementType: 'labels.text.fill', stylers: [{ color: '#f3d19c' }] }, { featureType: 'transit', elementType: 'geometry', stylers: [{ color: '#2f3948' }] }, { featureType: 'transit.station', elementType: 'labels.text.fill', stylers: [{ color: '#d59563' }] }, { featureType: 'water', elementType: 'geometry', stylers: [{ color: '#17263c' }] }, { featureType: 'water', elementType: 'labels.text.fill', stylers: [{ color: '#515c6d' }] }, { featureType: 'water', elementType: 'labels.text.stroke', stylers: [{ color: '#17263c' }] }];\n    } else { styleJson = []; }\n    // Create google maps link\n    $('.js-map-link').attr(\n      'href',\n      `https://www.google.com/maps/place/${\n        mapArray.directions\n      }/@${\n        lat\n      },${\n        lng}`,\n    );\n    // Set map options\n    const mapOptions = {\n      zoom: mapArray.zoom,\n      center: location,\n      styles: styleJson,\n      disableDefaultUI: false,\n    };\n    // Create map\n    const map = new google.maps.Map(\n      document.getElementById(mapArray.sectionid),\n      mapOptions,\n    );\n    // Show pin\n    if (mapArray.showpin === true) {\n      const marker = new google.maps.Marker({\n        position: location,\n        map,\n      });\n    }\n  }\n}\n\n\n/*============================================================================\n  Shoppable Image\n==============================================================================*/\nwindow.shoppableImage = {\n  init() {\n    $('[data-shoppable-image-wrapper]').each((_, wrapper) => {\n      const blocks = wrapper.querySelectorAll('[data-shoppable-image-block]');\n      let currentImage = wrapper.querySelector('[data-shoppable-image]');\n\n      // Only initialize slider if there is more than one shoppable image block added\n      if (blocks.length > 1) {\n        // sliderBlock utility function requires Flickity to be initialized with jQuery\n        const $wrapper = $(wrapper);\n        const settings = {\n          slideshowSpeed: $wrapper.data('slideshow-speed') * 1000,\n          slideshowTextAnimation: $wrapper.data('slideshow-text-animation'),\n          slideshowTransition: $wrapper.data('slideshow-transition'),\n        };\n\n        if (!$wrapper.hasClass('flickity-enabled')) {\n          $wrapper.flickity({\n            wrapAround: true,\n            cellAlign: 'left',\n            imagesLoaded: true,\n            prevNextButtons: true,\n            draggable: true,\n            arrowShape: window.arrowSize,\n            pageDots: true,\n            autoPlay: settings.slideshowSpeed,\n            adaptiveHeight: true,\n          });\n\n          /*\n            Move Flickity prev-next buttons to inside the shoppable image so\n            that the buttons don't stretch beyond the shoppable image.\n            We'll do this once on page load and then every time slides are changed.\n          */\n          if (wrapper.querySelector('.shoppable-image__bottom-bar')) {\n            const prevNextBtns = wrapper.querySelectorAll('.flickity-prev-next-button');\n            const currentImage = window.Flickity.data($wrapper[0]).selectedElement;\n            const currentShoppableImage = currentImage.querySelector('[data-shoppable-image]');\n            prevNextBtns.forEach(btn => $(btn).appendTo(currentShoppableImage));\n            $wrapper.on('change.flickity', () => {\n              const currentImage = window.Flickity.data($wrapper[0]).selectedElement;\n              const currentShoppableImage = currentImage.querySelector('[data-shoppable-image]');\n              prevNextBtns.forEach(btn => $(btn).appendTo(currentShoppableImage));\n            });\n          }\n\n          if (settings.slideshowTextAnimation !== '') {\n            const flkty = $wrapper.data('flickity');\n            setTimeout(() => {\n              $wrapper.find('.gallery-cell:nth-child(1) [data-slideshow-caption-text]').addClass(`animated ${settings.slideshowTextAnimation}`);\n            }, 400);\n\n            $wrapper.on('select.flickity', () => {\n              if ($wrapper.is(':visible')) {\n                const currentSlide = flkty.selectedIndex + 1;\n                setTimeout(() => {\n                  $wrapper.find('[data-slideshow-caption-text]').removeClass(`animated ${settings.slideshowTextAnimation}`);\n                  $wrapper.find(`.gallery-cell:nth-child(${currentSlide}) [data-slideshow-caption-text]`).addClass(`animated ${settings.slideshowTextAnimation}`);\n                }, 400);\n              }\n            });\n          }\n\n          /*\n            When using the slide transition, Flickity updates the positioning of its slides\n            which can affect the positioning of the product cards on slide change.\n            For fade transition we can just update the position once on page load.\n            For slide transition we will update the position for the first slide on page load\n            and when changing slides.\n          */\n\n          if (window.PXUTheme.media_queries.medium.matches && settings.slideshowTransition !== 'fade') {\n            const flkty = $wrapper.data('flickity');\n            const currentSlide = flkty.selectedIndex + 1;\n            const $hotspotEls = $wrapper.find(`.gallery-cell:nth-child(${currentSlide}) [data-hotspot]`);\n            $hotspotEls.each((_, hotspot) => {\n              this.repositionHotspotContent(hotspot);\n            })\n\n            $wrapper.on('settle.flickity', () => {\n              const currentSlide = flkty.selectedIndex + 1;\n              const $hotspotEls = $wrapper.find(`.gallery-cell:nth-child(${currentSlide}) [data-hotspot]`);\n\n              $hotspotEls.each((_, hotspot) => {\n                this.repositionHotspotContent(hotspot);\n              })\n            });\n          } else {\n            this.repositionHotspotContentEls(currentImage);\n          }\n\n          $wrapper.on('settle.flickity', () => {\n            currentImage = window.Flickity.data(wrapper).selectedElement;\n            this.repositionHotspotContentEls(currentImage);\n          });\n\n          // Add class to parent section so that sliderBlock utility is only called when slider enabled\n          const parentEl = wrapper.closest('.shopify-section--shoppable-image');\n          parentEl.classList.add('shopify-section--shoppable-image--slider-enabled');\n        }\n      } else {\n        this.repositionHotspotContentEls(currentImage);\n      }\n\n      const interactiveEls = wrapper.querySelectorAll('[data-interactive-element]');\n\n      /*\n        Adds active state to hotspot and thumbnails\n        When a hotspot is in focus, its linked thumbnail will also become active\n        When a thumbnail is in focus, its linked hotspot will also become active\n      */\n\n      document.body.addEventListener('click', (e) => {\n        const clickedInteractiveEl = e.target.closest('[data-interactive-element]');\n\n        interactiveEls.forEach((el, index) => {\n          const block = el.closest('[data-shoppable-image-block]');\n          if (clickedInteractiveEl && el.dataset.hotspotId === clickedInteractiveEl.dataset.hotspotId) {\n            block.classList.add(el.dataset.hotspotId, `hotspot--${index + 1}`);\n            el.classList.add('has-active-state');\n          } else {\n            block.classList.remove(el.dataset.hotspotId, `hotspot--${index + 1}`);\n            el.classList.remove('has-active-state');\n          }\n        })\n      });\n\n      // Reposition hotspots' content when window is resized.\n      window.addEventListener('resize', this.debounce(() => {\n        this.repositionHotspotContentEls(currentImage);\n      }));\n    });\n  },\n  // Adjust content wrapper if it is outside of the viewport or shoppable image\n  repositionHotspotContent(hotspot) {\n    const contentWrapperEl = hotspot.querySelector('[data-content-wrapper]');\n    const contentEl = contentWrapperEl.querySelector('[data-content]');\n    const shoppableImage = hotspot.closest('[data-shoppable-image]');\n\n    // Reset styles\n    contentWrapperEl.style.transform = '';\n    contentWrapperEl.style.top = '';\n    contentWrapperEl.style.bottom = '';\n\n    const contentBounds = contentEl.getBoundingClientRect();\n    const shoppableImageBounds = shoppableImage.getBoundingClientRect();\n\n    const cssTop = window.getComputedStyle(contentWrapperEl).getPropertyValue('padding');\n\n    /*\n      Prevent the hotspot content from going outside of the main shoppable image\n      when the hotspot is placed too close to the top.\n    */\n    if (contentBounds.top < shoppableImageBounds.top && !window.PXUTheme.media_queries.mobile_and_tablet.matches) {\n      contentWrapperEl.style.top = `-${cssTop}`;\n    }\n\n    /*\n      Prevent the hotspot content from going outside of the main shoppable image\n      when the hotspot is placed too close to the bottom.\n    */\n    if (contentBounds.bottom > shoppableImageBounds.bottom && !window.PXUTheme.media_queries.mobile_and_tablet.matches) {\n      contentWrapperEl.style.bottom = `-${cssTop}`;\n    }\n\n    /*\n      Prevent the hotspot content from going outside of the main shoppable image\n      when the hotspot is placed too close to the right.\n    */\n    if (contentBounds.right > shoppableImageBounds.width) {\n      contentWrapperEl.style.transform = 'translateX(-100%)';\n    }\n\n    /*\n      Prevent the hotspot content from going outside of the main shoppable image\n      when the hotspot is placed too close to the left.\n    */\n    if (contentBounds.left < 0) {\n      contentWrapperEl.style.transform = 'translateX(0)';\n    }\n  },\n  repositionHotspotContentEls(currentSlide) {\n    const hotspotEls = currentSlide.querySelectorAll('[data-hotspot]');\n    hotspotEls.forEach(hotspot => this.repositionHotspotContent(hotspot));\n  },\n  debounce(callback, timeout = 500) {\n    let timeoutId = null;\n    return (...args) => {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => {\n        callback.apply(null, args);\n      }, timeout);\n    };\n  },\n  unload($target) {\n    const $slider = $target.find('[data-shoppable-image-wrapper]');\n    if ($slider.hasClass('flickity-enabled')) {\n      $slider.flickity('destroy');\n    }\n  }\n}\n/*============================================================================\n  Global accordions\n==============================================================================*/\nwindow.accordion = {\n  init() {\n    let flg = 0;\n    const $vanillaAccordion = $('.accordion');\n    const $faqHeading = $('.faqAccordion > dt > button, .accordion > dt > a');\n    $('.faqAccordion > dd, .accordion > dd').attr('aria-hidden', true);\n\n    $faqHeading.attr('aria-expanded', false);\n\n    $faqHeading.on('click activate', function () {\n      if (flg) return false;\n      flg = 1;\n      const state = $(this).attr('aria-expanded') === 'false' ? true : false;\n      $(this).attr('aria-expanded', state);\n      $(this).parent().next().slideToggle(() => {\n        flg = 0;\n      });\n      $(this).parent().next().attr('aria-hidden', !state);\n      return false;\n    });\n    $faqHeading.on('keydown', function (event) {\n      const keyCode = event.keyCode || event.which;\n      if (keyCode === 13) {\n        $(this).trigger('activate');\n      }\n    });\n\n    $vanillaAccordion.each((_, accordion) => {\n      const $accordion = $(accordion);\n      if ($accordion.data('state') === 'open') {\n        $accordion.find($faqHeading[0]).parent().next().slideToggle();\n        $accordion.find($faqHeading[0]).attr('aria-expanded', true);\n      }\n    });\n  }\n}\n\n/*============================================================================\n  Global shortcodes\n==============================================================================*/\nclass ProductCTA extends HTMLElement {\n  static get shortcode() {\n    return 'product-cta';\n  }\n\n  constructor() {\n    // Always call super first in constructor\n    super();\n\n    // Create a shadow root\n    this.attachShadow({ mode: 'open' }); // sets and returns 'this.shadowRoot'\n    this.events = [];\n\n    const forAttr = this.getAttribute('for');\n    const variants = forAttr ? document.querySelector(`#${forAttr} [data-variants]`) : null;\n    const variantId = this.getAttribute('variantid');\n    const appendto = document.querySelector(this.getAttribute('appendto'));\n\n    if (!variants || !variantId) {\n      this._setVisible(false);\n      return;\n    }\n\n    if (appendto) {\n      appendto.appendChild(this);\n    }\n\n    // Remove element from DOM and insert new element into position\n    this._registerEvent({ el: variants, event: 'change', listener: e => this._onVariantChange(e, variantId) });\n    this._setVisible(variants.value === this.variantId);\n  }\n\n  connectedCallback() {\n    const href = this.getAttribute('href') || '#';\n    const target = this.getAttribute('target');\n    const style = document.createElement('style');\n    const a = document.createElement('a');\n    const slot = document.createElement('slot');\n\n    style.innerHTML = `\n      a {\n        color: inherit;\n        cursor; inherit;\n        text-decoration: inherit;\n      }\n    `;\n\n    a.href = href;\n    a.target = target;\n    a.appendChild(slot);\n\n    if (target === '_blank') {\n      const icon = document.createElement('span');\n      icon.classList.add('button-icon');\n      icon.setAttribute('aria-label', '(New window)');\n      icon.innerHTML = '<svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.81792 2.29812L5.68732 5.42884L6.57121 6.3127L9.70198 3.18183L9.70227 5.51933L10.9523 5.51917L10.9518 1.67302L10.9517 1.0481L10.3268 1.0481L6.48062 1.04815L6.48064 2.29815L8.81792 2.29812ZM1.67297 1.04817H1.04797V1.67317V10.327V10.952H1.67297H10.3268H10.9518V10.327V8.13026H9.70175V9.70195H2.29797V2.29817H3.83642V1.04817H1.67297Z\" fill=\"currentColor\"/></svg>';\n\n      // attach the created elements to the shadow DOM\n      a.appendChild(icon);\n    }\n\n    this.shadowRoot.append(style, a);\n  }\n\n  disconnectedCallback() {\n    this.events.forEach(({ el, event, listener }) => el.removeEventListener(event, listener));\n    this.shadowRoot.innerHTML = '';\n    this._setVisible(true);\n  }\n\n  _registerEvent({ el, event, listener }) {\n    this.events.push({ el, event, listener });\n\n    el.addEventListener(event, listener);\n\n    return { el, event, listener };\n  }\n\n  _setVisible(visible) {\n    this.toggleAttribute('hidden', !visible);\n  }\n\n  _onVariantChange(e, variantId) {\n    this._setVisible(e.currentTarget.value === variantId);\n  }\n}\n\ncustomElements.define(ProductCTA.shortcode, ProductCTA);\n"],"sourceRoot":""}